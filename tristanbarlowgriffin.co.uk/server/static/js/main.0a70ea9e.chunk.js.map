{"version":3,"sources":["../../packages/util/dist/index.js","ts/chess/chess.ts","ts/chess/chessLib.js","../../packages/types/dist/index.js","../../packages/util/dist/util.js","../../packages/types/dist/project.js","assets/images/me.png","assets/images/linked-in.png","components/MyHelmet.tsx","pages/Home.tsx","assets/images/git-hub.png","pages/Contact.tsx","ts/Auth.ts","ts/request.ts","ts/projects.ts","components/Image.tsx","components/MyLink.tsx","pages/Projects.tsx","components/NavBar.tsx","components/Background.tsx","components/LoadingModal.tsx","pages/ProjectView.tsx","components/InputField.tsx","components/Button.tsx","components/Loading.tsx","components/ImageUpload.tsx","components/ImageManager.tsx","components/ProjectAdd.tsx","components/ProjectManager.tsx","pages/Manage.tsx","ts/chess/players/chessPlayer.ts","ts/chess/players/human.ts","ts/util.ts","ts/chess/players/MinMax/node.ts","ts/chess/players/MinMax/node.worker.ts","ts/chess/players/MinMax/index.ts","ts/chess/players/types.ts","ts/chess/players/random.ts","components/chess/ChessBoard.tsx","components/MySelect.tsx","components/chess/ChessLog.tsx","components/chess/ChessController.tsx","ts/resize.ts","pages/Chess.tsx","components/Login.tsx","App.tsx","serviceWorker.ts","theme.ts","index.tsx"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","hasOwnProperty","value","require","newBoard","fen","Chess","BLACK","WHITE","EMPTY","PAWN","BISHOP","KING","SYMBOLS","DEFAULT_POSITION","POSSIBLE_RESULTS","PAWN_OFFSETS","b","w","PIECE_OFFSETS","n","r","q","ATTACKS","RAYS","SHIFTS","FLAGS","NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE","BITS","SQUARES","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1","ROOKS","square","flag","board","Array","kings","turn","castling","ep_square","half_moves","move_number","history","header","clear","keep_headers","update_setup","generate_fen","reset","load","should_update_history","tokens","split","position","validate_fen","valid","i","length","piece","charAt","is_digit","parseInt","color","put","type","toLowerCase","algebraic","indexOf","errors","error_number","error","isNaN","test","rows","sum_fields","previous_was_number","empty","toUpperCase","cflags","epflags","join","set_header","args","sq","build_move","from","to","flags","promotion","move","captured","generate_moves","options","add_move","moves","rank","push","pieces","len","us","them","swap_color","second_rank","first_sq","last_sq","single_square","legal","j","offset","castling_to","castling_from","attacked","legal_moves","make_move","king_attacked","undo_move","move_to_san","sloppy","output","disambiguator","ambiguities","same_rank","same_file","ambig_from","ambig_to","file","get_disambiguator","in_check","in_checkmate","stripped_san","replace","difference","index","blocked","in_stalemate","insufficient_material","bishops","num_pieces","sq_color","sum","in_threefold_repetition","positions","repetition","slice","pop","old","move_from_san","clean_move","matches","match","f","substring","c","make_pretty","ugly_move","clone","san","obj","dupe","property","trim","str","perft","depth","nodes","KNIGHT","ROOK","QUEEN","keys","Make_pretty","To_San","ugly","ugly_moves","verbose","in_draw","game_over","GetBoard","row","pgn","newline","newline_char","max_width","result","header_exists","reversed_history","move_string","Result","current_width","load_pgn","mask","header_regex","RegExp","header_string","exec","headers","header_obj","key","parse_pgn_header","ms","rav_regex","half_move","object","has_keys","arguments","ascii","s","move_obj","is_raw","pretty_move","undo","remove","square_color","sq_0x88","move_history","toKebab","toTitle","out","x","substr","isStr","isMeta","isProject","proj","description","gifId","imageId","links","title","meta","name","viewed","MyHelmet","Helmet","content","Home","className","alt","src","Me","style","borderRadius","height","width","href","rel","target","LinkedIn","Contact","maxWidth","Auth","_key","_isAuthed","authStateListners","listner","e","console","log","apiRequest","status","notifyListners","inst","validate","id","cb","_inst","path","method","data","a","Headers","body","File","append","JSON","stringify","isAuthed","fetch","process","res","success","json","useProjects","refresh","useState","projects","setProjects","loading","setLoading","useEffect","then","sort","order","catch","ImageEle","props","loaded","setLoaded","display","pos","isLoaded","overflow","mt","h","onLoad","objectFit","MyLink","as","Link","children","ProjectTile","flexDir","bg","minH","mb","mx","fontWeight","fontSize","Projects","flexDirection","py","justifyContent","rowGap","columnGap","templateColumns","map","NavBar","menuActive","setMenuActive","burgerClass","menuClass","makeItem","label","onClick","role","_hover","textDecoration","aria-hidden","Background","backgroundColor","left","top","zIndex","LoadingModal","hideBG","size","LinkView","link","alignSelf","mr","ProjectView","pId","useParams","useHistory","activeProj","setActiveProj","project","find","alignItems","maxW","justifyItems","my","px","InputField","onChange","change","clazz","Colors","Loading","React","Component","Button","click","ImageUpload","close","setName","setDescription","fileElement","useRef","ele","current","files","border","ref","isLoading","ImageManager","showImageUpload","setShowImageUpload","setRefresh","activeImage","setActiveImage","images","setImages","useImages","flexWrap","img","deleteImage","LinkInput","update","defaultProje","ProjectAdd","setProject","u","updateLink","splice","toString","v","submit","ProjectManager","projectAdd","setProjectAdd","activeProject","padding","overflowX","deleteProj","Manage","ChessPlayer","Human","PlayersTypes","HUMAN","isHuman","Error","shuffle","Math","floor","random","MINIMAX_VALS","MiniMacsNode","isDone","bestValue","Number","NEGATIVE_INFINITY","bestMove","POSITIVE_INFINITY","moveCount","game","colour","isMaxing","EvaluateBoard","best_move","best_value","NewLayer","max","min","isMyGo","y","column","val","quickGetMove","node","strt","performance","now","rating","details","timeTaken","getMove","MinMaxBot","MINMAX","statHistory","worker","_woker","MinMaxWorker","RandomBot","RANDOM","lastNumberOfMoves","possibleMoves","randomIndex","Players","MinMax","Random","PlayerFactory","player","colorLookup","ChessBoard","bind","setUndo","state","orientation","currentIsHuman","lastMove","setState","forceUpdate","pause","currentPlayer","response","checkGameOver","makeMove","onMove","lastPlayerColour","Promise","resolve","updateBoard","setTimeout","drop","sourceSquare","targetSquare","prev","white","black","calcWidth","window","outerWidth","showNotation","draggable","squareStyles","tileColours","onDrop","transitionDuration","toCSS","MySelect","selectProps","minW","ChessLog","logs","endRef","botName","ml","playerOptions","values","ChessController","paused","setPaused","setBlack","setWhite","setSize","useLayoutEffect","updateSize","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","setLogs","columns","time","getUnixTime","Date","INFO","ChessPage","Login","setKey","goBack","createBrowserHistory","App","pt","component","ReactGA","initialize","pageview","location","pathname","search","listen","Boolean","hostname","myTheme","theme","colors","brand","1","fonts","heading","mono","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"yFACA,IAAIA,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBD,EAAQE,eAAeD,IAAId,EAAgBa,EAASR,EAAGS,IAEpGZ,OAAOO,eAAeI,EAAS,aAAc,CAAEG,OAAO,IACtDJ,EAAaK,EAAQ,IAAWJ,I,gCCZhC,qDAEO,SAASK,EAAUC,GACxB,OAAOC,gBAAMD,GAIAC,EAAf,O,mBC6tDoCP,EAAQO,MAhsDhC,SAAUD,GACpB,IAAIE,EAAQ,IACRC,EAAQ,IAERC,GAAS,EAETC,EAAO,IAEPC,EAAS,IAGTC,EAAO,IAEPC,EAAU,eAEVC,EACF,2DAEEC,EAAmB,CAAC,MAAO,MAAO,UAAW,KAE7CC,EAAe,CACjBC,EAAG,CAAC,GAAI,GAAI,GAAI,IAChBC,EAAG,EAAE,IAAK,IAAK,IAAK,KAGlBC,EAAgB,CAClBC,EAAG,EAAE,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IACpCH,EAAG,EAAE,IAAK,GAAI,GAAI,IAClBI,EAAG,EAAE,GAAI,EAAG,IAAK,GACjBC,EAAG,EAAE,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,GACnC9B,EAAG,EAAE,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAIjC+B,EAAU,CACZ,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC3D,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAI1CC,EAAO,CACT,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI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","file":"static/js/main.0a70ea9e.chunk.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./util\"), exports);\n","import { Chess, ChessInstance } from './chessLib'\n\nexport function newBoard (fen?: string): ChessInstance {\n  return Chess(fen)\n}\n\nexport * from './chessLib'\nexport default Chess","/* eslint-disable */\n/*\n * Copyright (c) 2018, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\n/* minified license below  */\n\n/* @license\n * Copyright (c) 2018, Jeff Hlywa (jhlywa@gmail.com)\n * Released under the BSD license\n * https://github.com/jhlywa/chess.js/blob/master/LICENSE\n */\n\nvar Chess = function (fen) {\n  var BLACK = 'b'\n  var WHITE = 'w'\n\n  var EMPTY = -1\n\n  var PAWN = 'p'\n  var KNIGHT = 'n'\n  var BISHOP = 'b'\n  var ROOK = 'r'\n  var QUEEN = 'q'\n  var KING = 'k'\n\n  var SYMBOLS = 'pnbrqkPNBRQK'\n\n  var DEFAULT_POSITION =\n    'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'\n\n  var POSSIBLE_RESULTS = ['1-0', '0-1', '1/2-1/2', '*']\n\n  var PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15]\n  }\n\n  var PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14, 18, 33, 31, 14],\n    b: [-17, -15, 17, 15],\n    r: [-16, 1, 16, -1],\n    q: [-17, -16, -15, 1, 17, 16, 15, -1],\n    k: [-17, -16, -15, 1, 17, 16, 15, -1]\n  }\n\n  // prettier-ignore\n  var ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24, 24, 24, 24, 24, 24, 56, 0, 56, 24, 24, 24, 24, 24, 24, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20\n  ]\n\n  // prettier-ignore\n  var RAYS = [\n    17, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 15, 0,\n    0, 17, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 15, 0, 0,\n    0, 0, 17, 0, 0, 0, 0, 16, 0, 0, 0, 0, 15, 0, 0, 0,\n    0, 0, 0, 17, 0, 0, 0, 16, 0, 0, 0, 15, 0, 0, 0, 0,\n    0, 0, 0, 0, 17, 0, 0, 16, 0, 0, 15, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 17, 0, 16, 0, 15, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 17, 16, 15, 0, 0, 0, 0, 0, 0, 0,\n    1, 1, 1, 1, 1, 1, 1, 0, -1, -1, -1, -1, -1, -1, -1, 0,\n    0, 0, 0, 0, 0, 0, -15, -16, -17, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, -15, 0, -16, 0, -17, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, -15, 0, 0, -16, 0, 0, -17, 0, 0, 0, 0, 0,\n    0, 0, 0, -15, 0, 0, 0, -16, 0, 0, 0, -17, 0, 0, 0, 0,\n    0, 0, -15, 0, 0, 0, 0, -16, 0, 0, 0, 0, -17, 0, 0, 0,\n    0, -15, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, -17, 0, 0,\n    -15, 0, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, 0, -17\n  ]\n\n  var SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 }\n\n  var FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q'\n  }\n\n  var BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64\n  }\n\n  var RANK_1 = 7\n  var RANK_2 = 6\n  var RANK_3 = 5\n  var RANK_4 = 4\n  var RANK_5 = 3\n  var RANK_6 = 2\n  var RANK_7 = 1\n  var RANK_8 = 0\n\n  // prettier-ignore\n  var SQUARES = {\n    a8: 0, b8: 1, c8: 2, d8: 3, e8: 4, f8: 5, g8: 6, h8: 7,\n    a7: 16, b7: 17, c7: 18, d7: 19, e7: 20, f7: 21, g7: 22, h7: 23,\n    a6: 32, b6: 33, c6: 34, d6: 35, e6: 36, f6: 37, g6: 38, h6: 39,\n    a5: 48, b5: 49, c5: 50, d5: 51, e5: 52, f5: 53, g5: 54, h5: 55,\n    a4: 64, b4: 65, c4: 66, d4: 67, e4: 68, f4: 69, g4: 70, h4: 71,\n    a3: 80, b3: 81, c3: 82, d3: 83, e3: 84, f3: 85, g3: 86, h3: 87,\n    a2: 96, b2: 97, c2: 98, d2: 99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n  }\n\n  var ROOKS = {\n    w: [\n      { square: SQUARES.a1, flag: BITS.QSIDE_CASTLE },\n      { square: SQUARES.h1, flag: BITS.KSIDE_CASTLE }\n    ],\n    b: [\n      { square: SQUARES.a8, flag: BITS.QSIDE_CASTLE },\n      { square: SQUARES.h8, flag: BITS.KSIDE_CASTLE }\n    ]\n  }\n\n  var board = new Array(128)\n  var kings = { w: EMPTY, b: EMPTY }\n  var turn = WHITE\n  var castling = { w: 0, b: 0 }\n  var ep_square = EMPTY\n  var half_moves = 0\n  var move_number = 1\n  var history = []\n  var header = {}\n\n  /* if the user passes in a fen string, load it, else default to\n   * starting position\n   */\n  if (typeof fen === 'undefined') {\n    load(DEFAULT_POSITION)\n  } else {\n    load(fen)\n  }\n\n  function clear(keep_headers) {\n    if (typeof keep_headers === 'undefined') {\n      keep_headers = false\n    }\n\n    board = new Array(128)\n    kings = { w: EMPTY, b: EMPTY }\n    turn = WHITE\n    castling = { w: 0, b: 0 }\n    ep_square = EMPTY\n    half_moves = 0\n    move_number = 1\n    history = []\n    if (!keep_headers) header = {}\n    update_setup(generate_fen())\n  }\n\n  function reset() {\n    load(DEFAULT_POSITION)\n  }\n\n  function load(fen, keep_headers, should_update_history = true) {\n    if (typeof keep_headers === 'undefined') {\n      keep_headers = false\n    }\n\n    var tokens = fen.split(/\\s+/)\n    var position = tokens[0]\n    var square = 0\n\n    if (!validate_fen(fen).valid) {\n      return false\n    }\n\n    clear(keep_headers)\n\n    for (var i = 0; i < position.length; i++) {\n      var piece = position.charAt(i)\n\n      if (piece === '/') {\n        square += 8\n      }\n      else if (is_digit(piece)) {\n        square += parseInt(piece, 10)\n      }\n      else {\n        var color = piece < 'a' ? WHITE : BLACK\n        put({ type: piece.toLowerCase(), color: color }, algebraic(square), should_update_history)\n        square++\n      }\n    }\n\n    turn = tokens[1]\n\n    if (tokens[2].indexOf('K') > -1) {\n      castling.w |= BITS.KSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      castling.w |= BITS.QSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      castling.b |= BITS.KSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      castling.b |= BITS.QSIDE_CASTLE\n    }\n\n    ep_square = tokens[3] === '-' ? EMPTY : SQUARES[tokens[3]]\n    half_moves = parseInt(tokens[4], 10)\n    move_number = parseInt(tokens[5], 10)\n\n\n    update_setup(fen)\n\n    return true\n  }\n\n  /* TODO: this function is pretty much crap - it validates structure but\n   * completely ignores content (e.g. doesn't verify that each side has a king)\n   * ... we should rewrite this, and ditch the silly error_number field while\n   * we're at it\n   */\n  function validate_fen(fen) {\n    var errors = {\n      0: 'No errors.',\n      1: 'FEN string must contain six space-delimited fields.',\n      2: '6th field (move number) must be a positive integer.',\n      3: '5th field (half move counter) must be a non-negative integer.',\n      4: '4th field (en-passant square) is invalid.',\n      5: '3rd field (castling availability) is invalid.',\n      6: '2nd field (side to move) is invalid.',\n      7: \"1st field (piece positions) does not contain 8 '/'-delimited rows.\",\n      8: '1st field (piece positions) is invalid [consecutive numbers].',\n      9: '1st field (piece positions) is invalid [invalid piece].',\n      10: '1st field (piece positions) is invalid [row too large].',\n      11: 'Illegal en-passant square'\n    }\n\n    /* 1st criterion: 6 space-seperated fields? */\n    var tokens = fen.split(/\\s+/)\n    if (tokens.length !== 6) {\n      return { valid: false, error_number: 1, error: errors[1] }\n    }\n\n    /* 2nd criterion: move number field is a integer value > 0? */\n    if (isNaN(tokens[5]) || parseInt(tokens[5], 10) <= 0) {\n      return { valid: false, error_number: 2, error: errors[2] }\n    }\n\n    /* 3rd criterion: half move counter is an integer >= 0? */\n    if (isNaN(tokens[4]) || parseInt(tokens[4], 10) < 0) {\n      return { valid: false, error_number: 3, error: errors[3] }\n    }\n\n    /* 4th criterion: 4th field is a valid e.p.-string? */\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n      return { valid: false, error_number: 4, error: errors[4] }\n    }\n\n    /* 5th criterion: 3th field is a valid castle-string? */\n    if (!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {\n      return { valid: false, error_number: 5, error: errors[5] }\n    }\n\n    /* 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)? */\n    if (!/^(w|b)$/.test(tokens[1])) {\n      return { valid: false, error_number: 6, error: errors[6] }\n    }\n\n    /* 7th criterion: 1st field contains 8 rows? */\n    var rows = tokens[0].split('/')\n    if (rows.length !== 8) {\n      return { valid: false, error_number: 7, error: errors[7] }\n    }\n\n    /* 8th criterion: every row is valid? */\n    for (var i = 0; i < rows.length; i++) {\n      /* check for right sum of fields AND not two numbers in succession */\n      var sum_fields = 0\n      var previous_was_number = false\n\n      for (var k = 0; k < rows[i].length; k++) {\n        if (!isNaN(rows[i][k])) {\n          if (previous_was_number) {\n            return { valid: false, error_number: 8, error: errors[8] }\n          }\n          sum_fields += parseInt(rows[i][k], 10)\n          previous_was_number = true\n        } else {\n          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n            return { valid: false, error_number: 9, error: errors[9] }\n          }\n          sum_fields += 1\n          previous_was_number = false\n        }\n      }\n      if (sum_fields !== 8) {\n        return { valid: false, error_number: 10, error: errors[10] }\n      }\n    }\n\n    if (\n      (tokens[3][1] == '3' && tokens[1] == 'w') ||\n      (tokens[3][1] == '6' && tokens[1] == 'b')\n    ) {\n      return { valid: false, error_number: 11, error: errors[11] }\n    }\n\n    /* everything's okay! */\n    return { valid: true, error_number: 0, error: errors[0] }\n  }\n\n  function generate_fen() {\n    var empty = 0\n    var fen = ''\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      if (board[i] == null) {\n        empty++\n      } else {\n        if (empty > 0) {\n          fen += empty\n          empty = 0\n        }\n        var color = board[i].color\n        var piece = board[i].type\n\n        fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase()\n      }\n\n      if ((i + 1) & 0x88) {\n        if (empty > 0) {\n          fen += empty\n        }\n\n        if (i !== SQUARES.h1) {\n          fen += '/'\n        }\n\n        empty = 0\n        i += 8\n      }\n    }\n\n    var cflags = ''\n    if (castling[WHITE] & BITS.KSIDE_CASTLE) {\n      cflags += 'K'\n    }\n    if (castling[WHITE] & BITS.QSIDE_CASTLE) {\n      cflags += 'Q'\n    }\n    if (castling[BLACK] & BITS.KSIDE_CASTLE) {\n      cflags += 'k'\n    }\n    if (castling[BLACK] & BITS.QSIDE_CASTLE) {\n      cflags += 'q'\n    }\n\n    /* do we have an empty castling flag? */\n    cflags = cflags || '-'\n    var epflags = ep_square === EMPTY ? '-' : algebraic(ep_square)\n\n    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ')\n  }\n\n  function set_header(args) {\n    for (var i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {\n        header[args[i]] = args[i + 1]\n      }\n    }\n    return header\n  }\n\n  /* called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object.  if the FEN is\n   * equal to the default position, the SetUp and FEN are deleted\n   * the setup is only updated if history.length is zero, ie moves haven't been\n   * made.\n   */\n  function update_setup(fen) {\n    if (history.length > 0) return\n\n    if (fen !== DEFAULT_POSITION) {\n      header['SetUp'] = '1'\n      header['FEN'] = fen\n    } else {\n      delete header['SetUp']\n      delete header['FEN']\n    }\n  }\n\n  function get(square) {\n    var piece = board[SQUARES[square]]\n    return piece ? { type: piece.type, color: piece.color } : null\n  }\n\n  function put(piece, square, should_update_history = true) {\n    /* check for valid piece object */\n    if (!('type' in piece && 'color' in piece)) {\n      return false\n    }\n\n    /* check for piece */\n    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {\n      return false\n    }\n\n    /* check for valid square */\n    if (!(square in SQUARES)) {\n      return false\n    }\n\n    var sq = SQUARES[square]\n\n    /* don't let the user place more than one king */\n    if (\n      piece.type == KING &&\n      !(kings[piece.color] == EMPTY || kings[piece.color] == sq)\n    ) {\n      return false\n    }\n\n    board[sq] = { type: piece.type, color: piece.color }\n    if (piece.type === KING) {\n      kings[piece.color] = sq\n    }\n\n    if (should_update_history) update_setup(generate_fen())\n\n    return true\n  }\n\n  function remove(square) {\n    var piece = get(square)\n    board[SQUARES[square]] = null\n    if (piece && piece.type === KING) {\n      kings[piece.color] = EMPTY\n    }\n\n    update_setup(generate_fen())\n\n    return piece\n  }\n\n  function build_move(board, from, to, flags, promotion) {\n    var move = {\n      color: turn,\n      from: from,\n      to: to,\n      flags: flags,\n      piece: board[from].type\n    }\n\n    if (promotion) {\n      move.flags |= BITS.PROMOTION\n      move.promotion = promotion\n    }\n\n    if (board[to]) {\n      move.captured = board[to].type\n    } else if (flags & BITS.EP_CAPTURE) {\n      move.captured = PAWN\n    }\n    return move\n  }\n\n  function generate_moves(options) {\n    function add_move(board, moves, from, to, flags) {\n      /* if pawn promotion */\n      if (\n        board[from].type === PAWN &&\n        (rank(to) === RANK_8 || rank(to) === RANK_1)\n      ) {\n        var pieces = [QUEEN, ROOK, BISHOP, KNIGHT]\n        for (var i = 0, len = pieces.length; i < len; i++) {\n          moves.push(build_move(board, from, to, flags, pieces[i]))\n        }\n      } else {\n        moves.push(build_move(board, from, to, flags))\n      }\n    }\n\n    var moves = []\n    var us = turn\n    var them = swap_color(us)\n    var second_rank = { b: RANK_7, w: RANK_2 }\n\n    var first_sq = SQUARES.a8\n    var last_sq = SQUARES.h1\n    var single_square = false\n\n    /* do we want legal moves? */\n    var legal =\n      typeof options !== 'undefined' && 'legal' in options\n        ? options.legal\n        : true\n\n    /* are we generating moves for a single square? */\n    if (typeof options !== 'undefined' && 'square' in options) {\n      if (options.square in SQUARES) {\n        first_sq = last_sq = SQUARES[options.square]\n        single_square = true\n      } else {\n        /* invalid square */\n        return []\n      }\n    }\n\n    for (var i = first_sq; i <= last_sq; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      var piece = board[i]\n      if (piece == null || piece.color !== us) {\n        continue\n      }\n\n      if (piece.type === PAWN) {\n        /* single square, non-capturing */\n        var square = i + PAWN_OFFSETS[us][0]\n        if (board[square] == null) {\n          add_move(board, moves, i, square, BITS.NORMAL)\n\n          /* double square */\n          var square = i + PAWN_OFFSETS[us][1]\n          if (second_rank[us] === rank(i) && board[square] == null) {\n            add_move(board, moves, i, square, BITS.BIG_PAWN)\n          }\n        }\n\n        /* pawn captures */\n        for (j = 2; j < 4; j++) {\n          var square = i + PAWN_OFFSETS[us][j]\n          if (square & 0x88) continue\n\n          if (board[square] != null && board[square].color === them) {\n            add_move(board, moves, i, square, BITS.CAPTURE)\n          } else if (square === ep_square) {\n            add_move(board, moves, i, ep_square, BITS.EP_CAPTURE)\n          }\n        }\n      } else {\n        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {\n          var offset = PIECE_OFFSETS[piece.type][j]\n          var square = i\n\n          while (true) {\n            square += offset\n            if (square & 0x88) break\n\n            if (board[square] == null) {\n              add_move(board, moves, i, square, BITS.NORMAL)\n            } else {\n              if (board[square].color === us) break\n              add_move(board, moves, i, square, BITS.CAPTURE)\n              break\n            }\n\n            /* break, if knight or king */\n            if (piece.type === 'n' || piece.type === 'k') break\n          }\n        }\n      }\n    }\n\n    /* check for castling if: a) we're generating all moves, or b) we're doing\n     * single square move generation on the king's square\n     */\n    if (!single_square || last_sq === kings[us]) {\n      /* king-side castling */\n      if (castling[us] & BITS.KSIDE_CASTLE) {\n        var castling_from = kings[us]\n        var castling_to = castling_from + 2\n\n        if (\n          board[castling_from + 1] == null &&\n          board[castling_to] == null &&\n          !attacked(them, kings[us]) &&\n          !attacked(them, castling_from + 1) &&\n          !attacked(them, castling_to)\n        ) {\n          add_move(board, moves, kings[us], castling_to, BITS.KSIDE_CASTLE)\n        }\n      }\n\n      /* queen-side castling */\n      if (castling[us] & BITS.QSIDE_CASTLE) {\n        var castling_from = kings[us]\n        var castling_to = castling_from - 2\n\n        if (\n          board[castling_from - 1] == null &&\n          board[castling_from - 2] == null &&\n          board[castling_from - 3] == null &&\n          !attacked(them, kings[us]) &&\n          !attacked(them, castling_from - 1) &&\n          !attacked(them, castling_to)\n        ) {\n          add_move(board, moves, kings[us], castling_to, BITS.QSIDE_CASTLE)\n        }\n      }\n    }\n\n    /* return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal) {\n      return moves\n    }\n\n    /* filter out illegal moves */\n    var legal_moves = []\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i])\n      if (!king_attacked(us)) {\n        legal_moves.push(moves[i])\n      }\n      undo_move()\n    }\n\n    return legal_moves\n  }\n\n  /* convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} sloppy Use the sloppy SAN generator to work around over\n   * disambiguation bugs in Fritz and Chessbase.  See below:\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  function move_to_san(move, sloppy) {\n    var output = ''\n\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O'\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O'\n    } else {\n      var disambiguator = get_disambiguator(move, sloppy)\n\n      if (move.piece !== PAWN) {\n        output += move.piece.toUpperCase() + disambiguator\n      }\n\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0]\n        }\n        output += 'x'\n      }\n\n      output += algebraic(move.to)\n\n      if (move.flags & BITS.PROMOTION) {\n        output += '=' + move.promotion.toUpperCase()\n      }\n    }\n    make_move(move)\n    if (in_check()) {\n      if (in_checkmate()) {\n        output += '#'\n      } else {\n        output += '+'\n      }\n    }\n    undo_move()\n\n    return output\n  }\n\n  // parses all of the decorators out of a SAN string\n  function stripped_san(move) {\n    return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '')\n  }\n\n  function attacked(color, square) {\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      /* if empty square or wrong color */\n      if (board[i] == null || board[i].color !== color) continue\n\n      var piece = board[i]\n      var difference = i - square\n      var index = difference + 119\n\n      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {\n        if (piece.type === PAWN) {\n          if (difference > 0) {\n            if (piece.color === WHITE) return true\n          } else {\n            if (piece.color === BLACK) return true\n          }\n          continue\n        }\n\n        /* if the piece is a knight or a king */\n        if (piece.type === 'n' || piece.type === 'k') return true\n\n        var offset = RAYS[index]\n        var j = i + offset\n\n        var blocked = false\n        while (j !== square) {\n          if (board[j] != null) {\n            blocked = true\n            break\n          }\n          j += offset\n        }\n\n        if (!blocked) return true\n      }\n    }\n\n    return false\n  }\n\n  function king_attacked(color) {\n    return attacked(swap_color(color), kings[color])\n  }\n\n  function in_check() {\n    return king_attacked(turn)\n  }\n\n  function in_checkmate() {\n    return in_check() && generate_moves().length === 0\n  }\n\n  function in_stalemate() {\n    return !in_check() && generate_moves().length === 0\n  }\n\n  function insufficient_material() {\n    var pieces = {}\n    var bishops = []\n    var num_pieces = 0\n    var sq_color = 0\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      sq_color = (sq_color + 1) % 2\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      var piece = board[i]\n      if (piece) {\n        pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1\n        if (piece.type === BISHOP) {\n          bishops.push(sq_color)\n        }\n        num_pieces++\n      }\n    }\n\n    /* k vs. k */\n    if (num_pieces === 2) {\n      return true\n    } else if (\n      /* k vs. kn .... or .... k vs. kb */\n      num_pieces === 3 &&\n      (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)\n    ) {\n      return true\n    } else if (num_pieces === pieces[BISHOP] + 2) {\n      /* kb vs. kb where any number of bishops are all on the same color */\n      var sum = 0\n      var len = bishops.length\n      for (var i = 0; i < len; i++) {\n        sum += bishops[i]\n      }\n      if (sum === 0 || sum === len) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  function in_threefold_repetition() {\n    /* TODO: while this function is fine for casual use, a better\n     * implementation would use a Zobrist key (instead of FEN). the\n     * Zobrist key would be maintained in the make_move/undo_move functions,\n     * avoiding the costly that we do below.\n     */\n    var moves = []\n    var positions = {}\n    var repetition = false\n\n    while (true) {\n      var move = undo_move()\n      if (!move) break\n      moves.push(move)\n    }\n\n    while (true) {\n      /* remove the last two fields in the FEN string, they're not needed\n       * when checking for draw by rep */\n      var fen = generate_fen()\n        .split(' ')\n        .slice(0, 4)\n        .join(' ')\n\n      /* has the position occurred three or move times */\n      positions[fen] = fen in positions ? positions[fen] + 1 : 1\n      if (positions[fen] >= 3) {\n        repetition = true\n      }\n\n      if (!moves.length) {\n        break\n      }\n      make_move(moves.pop())\n    }\n\n    return repetition\n  }\n\n  function push(move) {\n    history.push({\n      move: move,\n      kings: { b: kings.b, w: kings.w },\n      turn: turn,\n      castling: { b: castling.b, w: castling.w },\n      ep_square: ep_square,\n      half_moves: half_moves,\n      move_number: move_number\n    })\n  }\n\n  function make_move(move) {\n    var us = turn\n    var them = swap_color(us)\n    push(move)\n\n    board[move.to] = board[move.from]\n    board[move.from] = null\n\n    /* if ep capture, remove the captured pawn */\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (turn === BLACK) {\n        board[move.to - 16] = null\n      } else {\n        board[move.to + 16] = null\n      }\n    }\n\n    /* if pawn promotion, replace with new piece */\n    if (move.flags & BITS.PROMOTION) {\n      board[move.to] = { type: move.promotion, color: us }\n    }\n\n    /* if we moved the king */\n    if (board[move.to].type === KING) {\n      kings[board[move.to].color] = move.to\n\n      /* if we castled, move the rook next to the king */\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        var castling_to = move.to - 1\n        var castling_from = move.to + 1\n        board[castling_to] = board[castling_from]\n        board[castling_from] = null\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        var castling_to = move.to + 1\n        var castling_from = move.to - 2\n        board[castling_to] = board[castling_from]\n        board[castling_from] = null\n      }\n\n      /* turn off castling */\n      castling[us] = ''\n    }\n\n    /* turn off castling if we move a rook */\n    if (castling[us]) {\n      for (var i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (\n          move.from === ROOKS[us][i].square &&\n          castling[us] & ROOKS[us][i].flag\n        ) {\n          castling[us] ^= ROOKS[us][i].flag\n          break\n        }\n      }\n    }\n\n    /* turn off castling if we capture a rook */\n    if (castling[them]) {\n      for (var i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (\n          move.to === ROOKS[them][i].square &&\n          castling[them] & ROOKS[them][i].flag\n        ) {\n          castling[them] ^= ROOKS[them][i].flag\n          break\n        }\n      }\n    }\n\n    /* if big pawn move, update the en passant square */\n    if (move.flags & BITS.BIG_PAWN) {\n      if (turn === 'b') {\n        ep_square = move.to - 16\n      } else {\n        ep_square = move.to + 16\n      }\n    } else {\n      ep_square = EMPTY\n    }\n\n    /* reset the 50 move counter if a pawn is moved or a piece is captured */\n    if (move.piece === PAWN) {\n      half_moves = 0\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      half_moves = 0\n    } else {\n      half_moves++\n    }\n\n    if (turn === BLACK) {\n      move_number++\n    }\n    turn = swap_color(turn)\n  }\n\n  function undo_move() {\n    var old = history.pop()\n    if (old == null) {\n      return null\n    }\n\n    var move = old.move\n    kings = old.kings\n    turn = old.turn\n    castling = old.castling\n    ep_square = old.ep_square\n    half_moves = old.half_moves\n    move_number = old.move_number\n\n    var us = turn\n    var them = swap_color(turn)\n\n    board[move.from] = board[move.to]\n    board[move.from].type = move.piece // to undo any promotions\n    board[move.to] = null\n\n    if (move.flags & BITS.CAPTURE) {\n      board[move.to] = { type: move.captured, color: them }\n    } else if (move.flags & BITS.EP_CAPTURE) {\n      var index\n      if (us === BLACK) {\n        index = move.to - 16\n      } else {\n        index = move.to + 16\n      }\n      board[index] = { type: PAWN, color: them }\n    }\n\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      var castling_to, castling_from\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castling_to = move.to + 1\n        castling_from = move.to - 1\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        castling_to = move.to - 2\n        castling_from = move.to + 1\n      }\n\n      board[castling_to] = board[castling_from]\n      board[castling_from] = null\n    }\n\n    return move\n  }\n\n  /* this function is used to uniquely identify ambiguous moves */\n  function get_disambiguator(move, sloppy) {\n    var moves = generate_moves({ legal: !sloppy })\n\n    var from = move.from\n    var to = move.to\n    var piece = move.piece\n\n    var ambiguities = 0\n    var same_rank = 0\n    var same_file = 0\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      var ambig_from = moves[i].from\n      var ambig_to = moves[i].to\n      var ambig_piece = moves[i].piece\n\n      /* if a move of the same piece type ends on the same to square, we'll\n       * need to add a disambiguator to the algebraic notation\n       */\n      if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {\n        ambiguities++\n\n        if (rank(from) === rank(ambig_from)) {\n          same_rank++\n        }\n\n        if (file(from) === file(ambig_from)) {\n          same_file++\n        }\n      }\n    }\n\n    if (ambiguities > 0) {\n      /* if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      if (same_rank > 0 && same_file > 0) {\n        return algebraic(from)\n      } else if (same_file > 0) {\n        /* if the moving piece rests on the same file, use the rank symbol as the\n       * disambiguator\n       */\n        return algebraic(from).charAt(1)\n      } else {\n        /* else use the file symbol */\n        return algebraic(from).charAt(0)\n      }\n    }\n\n    return ''\n  }\n\n  function ascii() {\n    var s = '   +------------------------+\\n'\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* display the rank */\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |'\n      }\n\n      /* empty piece */\n      if (board[i] == null) {\n        s += ' . '\n      } else {\n        var piece = board[i].type\n        var color = board[i].color\n        var symbol =\n          color === WHITE ? piece.toUpperCase() : piece.toLowerCase()\n        s += ' ' + symbol + ' '\n      }\n\n      if ((i + 1) & 0x88) {\n        s += '|\\n'\n        i += 8\n      }\n    }\n    s += '   +------------------------+\\n'\n    s += '     a  b  c  d  e  f  g  h\\n'\n\n    return s\n  }\n\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  function move_from_san(move, sloppy) {\n    // strip off any move decorations: e.g Nf3+?!\n    var clean_move = stripped_san(move)\n\n    // if we're using the sloppy parser run a regex to grab piece, to, and from\n    // this should parse invalid SAN like: Pe2-e4, Rc1c4, Qf3xf7\n    if (sloppy) {\n      var matches = clean_move.match(\n        /([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/\n      )\n      if (matches) {\n        var piece = matches[1]\n        var from = matches[2]\n        var to = matches[3]\n        var promotion = matches[4]\n      }\n    }\n\n    var moves = generate_moves()\n    for (var i = 0, len = moves.length; i < len; i++) {\n      // try the strict parser first, then the sloppy parser if requested\n      // by the user\n      if (\n        clean_move === stripped_san(move_to_san(moves[i])) ||\n        (sloppy && clean_move === stripped_san(move_to_san(moves[i], true)))\n      ) {\n        return moves[i]\n      } else {\n        if (\n          matches &&\n          (!piece || piece.toLowerCase() == moves[i].piece) &&\n          SQUARES[from] == moves[i].from &&\n          SQUARES[to] == moves[i].to &&\n          (!promotion || promotion.toLowerCase() == moves[i].promotion)\n        ) {\n          return moves[i]\n        }\n      }\n    }\n\n    return null\n  }\n\n  /*****************************************************************************\n   * UTILITY FUNCTIONS\n   ****************************************************************************/\n  function rank(i) {\n    return i >> 4\n  }\n\n  function file(i) {\n    return i & 15\n  }\n\n  function algebraic(i) {\n    var f = file(i),\n      r = rank(i)\n    return 'abcdefgh'.substring(f, f + 1) + '87654321'.substring(r, r + 1)\n  }\n\n  function swap_color(c) {\n    return c === WHITE ? BLACK : WHITE\n  }\n\n  function is_digit(c) {\n    return '0123456789'.indexOf(c) !== -1\n  }\n\n  /* pretty = external move object */\n  function make_pretty(ugly_move) {\n    var move = clone(ugly_move)\n    move.san = move_to_san(move, false)\n    move.to = algebraic(move.to)\n    move.from = algebraic(move.from)\n\n    var flags = ''\n\n    for (var flag in BITS) {\n      if (BITS[flag] & move.flags) {\n        flags += FLAGS[flag]\n      }\n    }\n    move.flags = flags\n\n    return move\n  }\n\n  function clone(obj) {\n    var dupe = obj instanceof Array ? [] : {}\n\n    for (var property in obj) {\n      if (typeof property === 'object') {\n        dupe[property] = clone(obj[property])\n      } else {\n        dupe[property] = obj[property]\n      }\n    }\n\n    return dupe\n  }\n\n  function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '')\n  }\n\n  /*****************************************************************************\n   * DEBUGGING UTILITIES\n   ****************************************************************************/\n  function perft(depth) {\n    var moves = generate_moves({ legal: false })\n    var nodes = 0\n    var color = turn\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i])\n      if (!king_attacked(color)) {\n        if (depth - 1 > 0) {\n          var child_nodes = perft(depth - 1)\n          nodes += child_nodes\n        } else {\n          nodes++\n        }\n      }\n      undo_move()\n    }\n\n    return nodes\n  }\n\n  return {\n    /***************************************************************************\n     * PUBLIC CONSTANTS (is there a better way to do this?)\n     **************************************************************************/\n    WHITE: WHITE,\n    BLACK: BLACK,\n    PAWN: PAWN,\n    KNIGHT: KNIGHT,\n    BISHOP: BISHOP,\n    ROOK: ROOK,\n    QUEEN: QUEEN,\n    KING: KING,\n    SQUARES: (function () {\n      /* from the ECMA-262 spec (section 12.6.4):\n                 * \"The mechanics of enumerating the properties ... is\n                 * implementation dependent\"\n                 * so: for (var sq in SQUARES) { keys.push(sq); } might not be\n                 * ordered correctly\n                 */\n      var keys = []\n      for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n        if (i & 0x88) {\n          i += 7\n          continue\n        }\n        keys.push(algebraic(i))\n      }\n      return keys\n    })(),\n    FLAGS: FLAGS,\n\n    /***************************************************************************\n     * PUBLIC API\n     **************************************************************************/\n    load: function (fen, should_update_history = true) {\n      return load(fen, undefined, should_update_history)\n    },\n\n    reset: function () {\n      return reset()\n    },\n\n    Make_pretty: function (move) {\n      return make_pretty(move)\n    },\n    To_San: function (move) {\n      return move_to_san(move)\n    },\n\n    moves: function (ugly = false, options) {\n      /* The internal representation of a chess move is in 0x88 format, and\n       * not meant to be human-readable.  The code below converts the 0x88\n       * square coordinates to algebraic coordinates.  It also prunes an\n       * unnecessary move keys resulting from a verbose call.\n       */\n\n      var ugly_moves = generate_moves(options)\n\n      if (ugly) return ugly_moves\n\n      var moves = []\n\n      for (var i = 0, len = ugly_moves.length; i < len; i++) {\n        /* does the user want a full move object (most likely not), or just\n         * SAN\n         */\n        if (\n          typeof options !== 'undefined' &&\n          'verbose' in options &&\n          options.verbose\n        ) {\n          moves.push(make_pretty(ugly_moves[i]))\n        } else {\n          moves.push(move_to_san(ugly_moves[i], false))\n        }\n      }\n\n      return moves\n    },\n\n    in_check: function () {\n      return in_check()\n    },\n\n    in_checkmate: function () {\n      return in_checkmate()\n    },\n\n    in_stalemate: function () {\n      return in_stalemate()\n    },\n\n    in_draw: function () {\n      return (\n        half_moves >= 100 ||\n        in_stalemate() ||\n        insufficient_material() ||\n        in_threefold_repetition()\n      )\n    },\n\n    insufficient_material: function () {\n      return insufficient_material()\n    },\n\n    in_threefold_repetition: function () {\n      return in_threefold_repetition()\n    },\n\n    game_over: function () {\n      return (\n        half_moves >= 100 ||\n        in_checkmate() ||\n        in_stalemate() ||\n        insufficient_material() ||\n        in_threefold_repetition()\n      )\n    },\n\n    validate_fen: function (fen) {\n      return validate_fen(fen)\n    },\n\n    fen: function () {\n      return generate_fen()\n    },\n\n    GetBoard: function () {\n      return board\n    },\n\n    board: function () {\n      var output = [],\n        row = []\n\n      for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n        if (board[i] == null) {\n          row.push(null)\n        } else {\n          row.push({ type: board[i].type, color: board[i].color })\n        }\n        if ((i + 1) & 0x88) {\n          output.push(row)\n          row = []\n          i += 8\n        }\n      }\n\n      return output\n    },\n\n    pgn: function (options) {\n      /* using the specification from http://www.chessclub.com/help/PGN-spec\n       * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n       */\n      var newline =\n        typeof options === 'object' && typeof options.newline_char === 'string'\n          ? options.newline_char\n          : '\\n'\n      var max_width =\n        typeof options === 'object' && typeof options.max_width === 'number'\n          ? options.max_width\n          : 0\n      var result = []\n      var header_exists = false\n\n      /* add the PGN header headerrmation */\n      for (var i in header) {\n        /* TODO: order of enumerated properties in header object is not\n         * guaranteed, see ECMA-262 spec (section 12.6.4)\n         */\n        result.push('[' + i + ' \"' + header[i] + '\"]' + newline)\n        header_exists = true\n      }\n\n      if (header_exists && history.length) {\n        result.push(newline)\n      }\n\n      /* pop all of history onto reversed_history */\n      var reversed_history = []\n      while (history.length > 0) {\n        reversed_history.push(undo_move())\n      }\n\n      var moves = []\n      var move_string = ''\n\n      /* build the list of moves.  a move_string looks like: \"3. e3 e6\" */\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop()\n\n        /* if the position started with black to move, start PGN with 1. ... */\n        if (!history.length && move.color === 'b') {\n          move_string = move_number + '. ...'\n        } else if (move.color === 'w') {\n          /* store the previous generated move_string if we have one */\n          if (move_string.length) {\n            moves.push(move_string)\n          }\n          move_string = move_number + '.'\n        }\n\n        move_string = move_string + ' ' + move_to_san(move, false)\n        make_move(move)\n      }\n\n      /* are there any other leftover moves? */\n      if (move_string.length) {\n        moves.push(move_string)\n      }\n\n      /* is there a result? */\n      if (typeof header.Result !== 'undefined') {\n        moves.push(header.Result)\n      }\n\n      /* history should be back to what is was before we started generating PGN,\n       * so join together moves\n       */\n      if (max_width === 0) {\n        return result.join('') + moves.join(' ')\n      }\n\n      /* wrap the PGN output at max_width */\n      var current_width = 0\n      for (var i = 0; i < moves.length; i++) {\n        /* if the current move will push past max_width */\n        if (current_width + moves[i].length > max_width && i !== 0) {\n          /* don't end the line with whitespace */\n          if (result[result.length - 1] === ' ') {\n            result.pop()\n          }\n\n          result.push(newline)\n          current_width = 0\n        } else if (i !== 0) {\n          result.push(' ')\n          current_width++\n        }\n        result.push(moves[i])\n        current_width += moves[i].length\n      }\n\n      return result.join('')\n    },\n\n    load_pgn: function (pgn, options) {\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy =\n        typeof options !== 'undefined' && 'sloppy' in options\n          ? options.sloppy\n          : false\n\n      function mask(str) {\n        return str.replace(/\\\\/g, '\\\\')\n      }\n\n      function has_keys(object) {\n        for (var key in object) {\n          return true\n        }\n        return false\n      }\n\n      function parse_pgn_header(header, options) {\n        var newline_char =\n          typeof options === 'object' &&\n            typeof options.newline_char === 'string'\n            ? options.newline_char\n            : '\\r?\\n'\n        var header_obj = {}\n        var headers = header.split(new RegExp(mask(newline_char)))\n        var key = ''\n        var value = ''\n\n        for (var i = 0; i < headers.length; i++) {\n          key = headers[i].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/, '$1')\n          value = headers[i].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\]$/, '$1')\n          if (trim(key).length > 0) {\n            header_obj[key] = value\n          }\n        }\n\n        return header_obj\n      }\n\n      var newline_char =\n        typeof options === 'object' && typeof options.newline_char === 'string'\n          ? options.newline_char\n          : '\\r?\\n'\n\n      // RegExp to split header. Takes advantage of the fact that header and movetext\n      // will always have a blank line between them (ie, two newline_char's).\n      // With default newline_char, will equal: /^(\\[((?:\\r?\\n)|.)*\\])(?:\\r?\\n){2}/\n      var header_regex = new RegExp(\n        '^(\\\\[((?:' +\n        mask(newline_char) +\n        ')|.)*\\\\])' +\n        '(?:' +\n        mask(newline_char) +\n        '){2}'\n      )\n\n      // If no header given, begin with moves.\n      var header_string = header_regex.test(pgn)\n        ? header_regex.exec(pgn)[1]\n        : ''\n\n      // Put the board in the starting position\n      reset()\n\n      /* parse PGN header */\n      var headers = parse_pgn_header(header_string, options)\n      for (var key in headers) {\n        set_header([key, headers[key]])\n      }\n\n      /* load the starting position indicated by [Setup '1'] and\n      * [FEN position] */\n      if (headers['SetUp'] === '1') {\n        if (!('FEN' in headers && load(headers['FEN'], true))) {\n          // second argument to load: don't clear the headers\n          return false\n        }\n      }\n\n      /* delete header to get the moves */\n      var ms = pgn\n        .replace(header_string, '')\n        .replace(new RegExp(mask(newline_char), 'g'), ' ')\n\n      /* delete comments */\n      ms = ms.replace(/(\\{[^}]+\\})+?/g, '')\n\n      /* delete recursive annotation variations */\n      var rav_regex = /(\\([^\\(\\)]+\\))+?/g\n      while (rav_regex.test(ms)) {\n        ms = ms.replace(rav_regex, '')\n      }\n\n      /* delete move numbers */\n      ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '')\n\n      /* delete ... indicating black to move */\n      ms = ms.replace(/\\.\\.\\./g, '')\n\n      /* delete numeric annotation glyphs */\n      ms = ms.replace(/\\$\\d+/g, '')\n\n      /* trim and get array of moves */\n      var moves = trim(ms).split(new RegExp(/\\s+/))\n\n      /* delete empty entries */\n      moves = moves\n        .join(',')\n        .replace(/,,+/g, ',')\n        .split(',')\n      var move = ''\n\n      for (var half_move = 0; half_move < moves.length - 1; half_move++) {\n        move = move_from_san(moves[half_move], sloppy)\n\n        /* move not possible! (don't clear the board to examine to show the\n         * latest valid position)\n         */\n        if (move == null) {\n          return false\n        } else {\n          make_move(move)\n        }\n      }\n\n      /* examine last move */\n      move = moves[moves.length - 1]\n      if (POSSIBLE_RESULTS.indexOf(move) > -1) {\n        if (has_keys(header) && typeof header.Result === 'undefined') {\n          set_header(['Result', move])\n        }\n      } else {\n        move = move_from_san(move, sloppy)\n        if (move == null) {\n          return false\n        } else {\n          make_move(move)\n        }\n      }\n      return true\n    },\n\n    header: function () {\n      return set_header(arguments)\n    },\n\n    ascii: function () {\n      return ascii()\n    },\n\n    turn: function () {\n      return turn\n    },\n\n    move: function (move, options) {\n      /* The move function can be called with in the following parameters:\n       *\n       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string\n       *\n       * .move({ from: 'h7', <- where the 'move' is a move object (additional\n       *         to :'h8',      fields are ignored)\n       *         promotion: 'q',\n       *      })\n       */\n\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy =\n        typeof options !== 'undefined' && 'sloppy' in options\n          ? options.sloppy\n          : false\n\n      var move_obj = null\n\n\n      if (typeof move === 'string') {\n        move_obj = move_from_san(move, sloppy)\n      } else if (typeof move === 'object') {\n        var moves = generate_moves()\n\n        let is_raw = typeof move.to !== \"string\"\n\n        /* convert the pretty move object to an ugly move object */\n        for (var i = 0, len = moves.length; i < len; i++) {\n          let b1 = is_raw ? move.from === moves[i].from : move.from === algebraic(moves[i].from)\n          let b2 = is_raw ? move.to === moves[i].to : move.to === algebraic(moves[i].to)\n          let b3 = (!('promotion' in moves[i]) || move.promotion === moves[i].promotion)\n          if (b1 && b2 && b3) {\n            move_obj = moves[i]\n            make_move(move_obj)\n\n            return move_obj\n          }\n        }\n      }\n\n      /* failed to find move */\n      if (!move_obj) {\n        return null\n      }\n\n      /* need to make a copy of move because we can't generate SAN after the\n       * move is made\n       */\n      var pretty_move = make_pretty(move_obj)\n\n      make_move(move_obj)\n\n      return pretty_move\n    },\n\n    undo: function () {\n      var move = undo_move()\n      return move ? make_pretty(move) : null\n    },\n\n    clear: function () {\n      return clear()\n    },\n\n    put: function (piece, square) {\n      return put(piece, square)\n    },\n\n    get: function (square) {\n      return get(square)\n    },\n\n    remove: function (square) {\n      return remove(square)\n    },\n\n    perft: function (depth) {\n      return perft(depth)\n    },\n\n    square_color: function (square) {\n      if (square in SQUARES) {\n        var sq_0x88 = SQUARES[square]\n        return (rank(sq_0x88) + file(sq_0x88)) % 2 === 0 ? 'light' : 'dark'\n      }\n\n      return null\n    },\n\n    history: function (options) {\n      var reversed_history = []\n      var move_history = []\n      var verbose =\n        typeof options !== 'undefined' &&\n        'verbose' in options &&\n        options.verbose\n\n      while (history.length > 0) {\n        reversed_history.push(undo_move())\n      }\n\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop()\n        if (verbose) {\n          move_history.push(make_pretty(move))\n        } else {\n          move_history.push(move_to_san(move))\n        }\n        make_move(move)\n      }\n\n      return move_history\n    }\n  }\n}\n\n/* export ChessAI object if using node or any other CommonJS compatible\n* environment */\nif (typeof exports !== 'undefined') exports.Chess = Chess","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./project\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toKebab = exports.toTitle = void 0;\nfunction toTitle(str) {\n    var out = str.replace(/-[a-z]/g, function (x) {\n        return x.replace('-', ' ').toUpperCase();\n    });\n    if (out.length > 0)\n        out = out[0].toUpperCase() + out.substr(1, out.length - 1);\n    return out;\n}\nexports.toTitle = toTitle;\nfunction toKebab(str) {\n    return str.replace(/ /g, '-').toLowerCase();\n}\nexports.toKebab = toKebab;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isMeta = exports.isProject = void 0;\nfunction isStr(x) {\n    return typeof x === 'string';\n}\nfunction isProject(proj) {\n    return !!proj\n        && isStr(proj.description)\n        && isStr(proj.gifId)\n        && isStr(proj.imageId)\n        && proj.links instanceof Array\n        && isStr(proj.title);\n}\nexports.isProject = isProject;\nfunction isMeta(meta) {\n    return !!meta\n        && isStr(meta.name)\n        && (meta.description === null || isStr(meta.description))\n        && typeof meta.viewed === 'number';\n}\nexports.isMeta = isMeta;\n","export default __webpack_public_path__ + \"static/media/me.be803e5a.png\";","export default __webpack_public_path__ + \"static/media/linked-in.52bdf39b.png\";","import React from 'react'\nimport { Helmet } from 'react-helmet'\n\ninterface Props {\n  title: string\n  description: string\n}\nexport default function MyHelmet ({ description, title }: Props) {\n  return (\n    <Helmet>\n      <title>{ title }</title>\n      <meta name=\"description\" content={ description } />\n    </Helmet>\n  )\n\n}","import React from 'react'\nimport Me from '../assets/images/me.png'\nimport LinkedIn from '../assets/images/linked-in.png'\nimport GitHub from '../assets/images/git-hub.png'\nimport MyHelmet from '../components/MyHelmet'\n\nexport default function Home () {\n  return (\n    <div className=\"tile is-parent\">\n      <div className=\"title\"></div>\n      <MyHelmet title=\"TBG - Home\" description=\"This is the personal website of Tristan Barlow-Griffin - Fullstack Software Engineer - Cornwall UK\" />\n      <div className=\"tile is-child center-a col flex\">\n        <div className=\"section\">\n          <img className=\"shadow-1\" alt=\"Its me :)\" src={ Me } style={ { borderRadius: '25%', height: 'auto', width: '200px' } } />\n        </div>\n        <p className=\"title is-1  is-size-4-mobile\">Tristan Barlow-Griffin</p>\n        <p className=\"title is-4 is-size-6-mobile\">Full Stack Software Engineer</p>\n        <p className=\"title is-5 is-size-7-mobile\">Cornwall, UK</p>\n        <div className=\"row\">\n          <a href=\"https://linkedin.com/in/tristan-barlow-griffin-2b4a4817a/\" rel=\"noopener noreferrer\" target=\"_blank\" className=\"selectable p-x-md\">\n            <img alt=\"LinkedIn\" width=\"70px\" src={ LinkedIn } />\n          </a>\n          <a href=\"https://github.com/TristanBarlow\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"selectable p-x-md\" >\n            <img alt=\"LinkedIn\" width=\"70px\" src={ GitHub } />\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}","export default \"data:image/png;base64,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\"","import React from 'react'\nimport MyHelmet from '../components/MyHelmet'\n\nexport default function Contact () {\n  return (\n    <div className=\"tile is-parent\">\n      <MyHelmet title=\"TBG - Contact\" description=\"This is the contact page of Tristan Barlow-Griffin - Fullstack Software Engineer - Cornwall UK\" />\n      <div className=\"title\"></div>\n      <div className=\"tile is-child center-a col flex\">\n        <p className=\"title is-1  is-size-4-mobile\">Contact</p>\n        <div className=\"title\">\n          <p style={ { maxWidth: '520px' } } className=\"title is-5 is-size-7-mobile\">If you do want to contact me for whatever reason send me an email. I will try to respond as soon as I can :)</p>\n        </div>\n        <p className=\"title is-4 is-size-6-mobile\">tristanbarlowg@gmail.com</p>\n      </div>\n    </div>\n  )\n}","import { apiRequest } from './request'\n\nexport type AuthListner = ((isAuthed: boolean) => void)\nexport class Auth {\n  private static _inst: Auth\n  private _key: string = ''\n  private _isAuthed: boolean = false\n  private authStateListners: { [id: string]: AuthListner } = {}\n\n  static get inst (): Auth {\n    return Auth._inst ? Auth._inst : Auth._inst = new Auth()\n  }\n\n  static get key (): string {\n    return Auth.inst._key || ''\n  }\n\n  static get isAuthed (): boolean {\n    return Auth.inst._isAuthed || false\n  }\n\n  static validate (key: string): Promise<boolean> {\n    return Auth.inst.validate(key)\n  }\n\n  static registerListner (id: string, cb: AuthListner) {\n    Auth.inst.authStateListners[id] = cb\n  }\n\n  private notifyListners () {\n    for (const key in this.authStateListners) {\n      const listner = this.authStateListners[key]\n      try {\n        listner(this._isAuthed)\n      } catch (e) {\n        console.log('Removing listner: ', key)\n        delete this.authStateListners[key]\n      }\n    }\n  }\n\n  private async validate (key: string): Promise<boolean> {\n    this._key = ''\n    this._isAuthed = false\n    const response = await apiRequest('/api/validate', 'POST', { key })\n    if (response.status === 200) {\n      this._key = key\n      this._isAuthed = true\n    }\n\n    this.notifyListners()\n    return this._isAuthed\n  }\n\n  private constructor () { }\n}","import { Auth } from './Auth'\n\nexport type APIResponse<T> = { status: 200, success: true, data: T } | { status: number, success: false }\n\nexport async function apiRequest<T> (\n  path: string,\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE',\n  data?: Record<string, any> | File,\n): Promise<APIResponse<T>> {\n  const headers: Headers = new Headers()\n  let body: any = data\n  if (data) {\n    if (data instanceof File) {\n      headers.append('Content-type', data.type)\n    } else if (typeof data === 'object') {\n      headers.append('Content-type', 'application/json')\n      body = JSON.stringify(data)\n    }\n  }\n\n  if (Auth.isAuthed) {\n    headers.append('key', Auth.key || '')\n  }\n\n  const res = await fetch(`${ process.env.REACT_APP_SERVER_URL }${ path }`, { body, method, headers })\n  if (res.status !== 200) {\n    return {\n      success: false,\n      status: res.status\n    }\n  }\n\n  try {\n    return {\n      success: true,\n      data: await res.json(),\n      status: res.status\n    }\n  } catch (e) {\n    return {\n      success: false,\n      status: res.status\n    }\n  }\n}","import { useEffect, useState } from 'react'\nimport { ImageMeta, Project } from '@tbg/types/src/project'\nimport { apiRequest } from './request'\n\n\nexport function useProjects (refresh?: boolean): [Project[], boolean] {\n  const [projects, setProjects] = useState<Project[]>([])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    setLoading(true)\n    apiRequest<Project[]>('/api/projects', 'GET')\n      .then(x => {\n        setLoading(false)\n        if (x.success) {\n          console.log('Got Projects', x.data)\n          setProjects(x.data.sort((a, b)=> a.order - b.order))\n        }\n      })\n      .catch((e) => {\n        console.error(e)\n        setLoading(false)\n      })\n\n  }, [refresh])\n\n  return [projects, loading]\n}\n\nexport function useImages (refresh?: boolean): [ImageMeta[], boolean] {\n  const [images, setImages] = useState<ImageMeta[]>([])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    setLoading(true)\n    apiRequest<ImageMeta[]>('/api/images', 'GET')\n      .then(x => {\n        setLoading(false)\n        if (x.success) {\n          console.log('Got Projects', x.data)\n          setImages(x.data)\n        }\n      })\n\n  }, [refresh])\n\n  return [images, loading]\n}\n","import React, { useState } from 'react'\nimport { ImageMeta, isMeta } from '@tbg/types'\nimport { Image, Skeleton, SkeletonProps } from '@chakra-ui/react'\n\ninterface Props extends SkeletonProps {\n  meta: ImageMeta | string\n  loadSize?: number\n}\nexport default function ImageEle (props: Props) {\n  const [loaded, setLoaded] = useState(false)\n  const { meta } = props\n  const src = `${ process.env.REACT_APP_SERVER_URL }/api/image/${ isMeta(meta) ? meta.name : meta }`\n  const description = isMeta(meta) && meta.description\n  return <Skeleton\n    display=\"flex\"\n    pos=\"relative\"\n    isLoaded={ loaded } { ...props }\n    overflow=\"hidden\"\n  >\n    <Image\n      mt=\"auto\"\n      w=\"100%\"\n      h=\"100%\"\n      onLoad={ () => setLoaded(true) }\n      objectFit='cover'\n      alt={ description || '' }\n      src={ src }\n    />\n  </Skeleton>\n}","import React from 'react'\nimport { Link as CLink, LinkProps } from '@chakra-ui/react'\nimport { Link } from 'react-router-dom'\n\ninterface Props extends LinkProps {\n  to?: string\n  label?: string\n}\nexport default function MyLink (props: Props) {\n  return (\n    <CLink as={ Link } { ...props }>{ props.children }</CLink>\n  )\n}","import React from 'react'\nimport { Project } from '@tbg/types/src/project'\nimport { toKebab } from '@tbg/util'\nimport { useProjects } from '../ts/projects'\nimport { Flex, Grid, Text } from '@chakra-ui/react'\nimport ImageEle from '../components/Image'\nimport MyHelmet from '../components/MyHelmet'\nimport MyLink from '../components/MyLink'\n\nfunction ProjectTile ({ imageId, title }: Project): JSX.Element {\n  return (\n    <MyLink\n      display=\"flex\"\n      flexDir=\"column\"\n      bg=\"white\"\n      minH=\"100px\"\n      h=\"fit-content\"\n      className=\"shadow-1\"\n      borderRadius=\"10px\"\n      to={ `/projects/${ toKebab(title) }` }\n    >\n      <Text mb={ 2 } mt={ 2 } mx={ 2 } fontWeight=\"bold\" fontSize=\"2xl\">{ title }</Text>\n      <ImageEle borderRadius=\"8px\" h=\"250px\" w=\"auto\" meta={ imageId } />\n    </MyLink>\n  )\n}\n\nexport default function Projects () {\n  const [projects] = useProjects()\n\n  return (\n    <Flex w=\"100%\" flexDirection=\"column\" className=\"\">\n      <MyHelmet title=\"TBG - Projects\" description=\"This show cases some of the projects Tristan Barlow-Griffin - Fullstack Software Engineer - Cornwall UK has worked on.\" />\n      <p className=\"title is-3\">My Projects</p>\n      <Grid py={ 1 } justifyContent=\"center\" rowGap={ 2 } columnGap={ 2 } templateColumns=\"repeat(auto-fill, minmax(100px, 300px))\">\n        { projects.map(x => <ProjectTile key={ x.title } { ...x } />) }\n      </Grid>\n    </Flex>\n  )\n}\n","import { Box } from '@chakra-ui/react'\nimport React, { useState } from 'react'\nimport Link from './MyLink'\n\nexport default function NavBar () {\n  const [menuActive, setMenuActive] = useState(false)\n\n  const burgerClass = menuActive ? \"navbar-burger is-active \" : \"navbar-burger \"\n  const menuClass = menuActive ? \"navbar-menu is-active \" : \"navbar-menu \"\n\n  function makeItem (label: string, path: string): JSX.Element {\n    return (<Link onClick={ () => setMenuActive(false) } as={ Link } to={ path } className=\"navbar-item \" >\n      { label }\n    </Link>)\n  }\n\n  return (\n    <div>\n      <nav className=\"shadow-1 navbar is-primary\" role=\"navigation\">\n        <div className=\"navbar-brand\">\n          <Link _hover={ { textDecoration: '' } } className=\"navbar-item\" to=\"/\">\n            <p className=\"title\">TBG</p>\n          </Link>\n          <a role=\"button\" className={ burgerClass } onClick={ () => setMenuActive(!menuActive) } >\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n          </a>\n        </div>\n\n        <Box bg=\"brand.1\" id=\"navbarBasicExample\" className={ menuClass }>\n          <Box bg=\"brand.1\" className=\"navbar-start\">\n            { makeItem('Projects', '/projects') }\n            { makeItem('Chess', '/chess') }\n            { makeItem('Contact', '/contact') }\n          </Box>\n        </Box>\n      </nav >\n    </div >\n  )\n}","import React from 'react'\n\ninterface Props {\n  color: string\n}\n\nexport default function Background (c: Props) {\n  return (\n    <div style={ { overflow: '0', backgroundColor: c.color, width: '100vw', height: '100vh', position: 'fixed', left: 0, top: 0, zIndex: -1 } }></div>\n  )\n}","import React from 'react'\nimport { Flex, Spinner } from '@chakra-ui/react'\n\ninterface Props {\n  hideBG?: boolean\n}\nexport default function LoadingModal (props: Props) {\n  return (\n    <div className='modal is-active rounded'>\n      {!props.hideBG && <div className=\"modal-background\" /> }\n      <Flex>\n        <Spinner color={ props.hideBG ? 'black' : \"white\" } size=\"xl\" />\n      </Flex>\n    </div>\n  )\n}","import React, { useEffect, useState } from 'react'\nimport { toKebab } from '@tbg/util'\nimport { ProjectLink, Project } from '@tbg/types'\nimport { useHistory, useParams } from 'react-router'\nimport MyHelmet from '../components/MyHelmet'\nimport { useProjects } from '../ts/projects'\nimport LoadingModal from '../components/LoadingModal'\nimport { Flex, Grid, Link, Text } from '@chakra-ui/react'\nimport ImageEle from '../components/Image'\n\ninterface RouterParams {\n  pId: string\n}\n\nfunction LinkView ({ label, link }: ProjectLink) {\n  return <Flex mb={ 1 } fontSize=\"lg\" fontWeight=\"700\" alignSelf=\"flex-start\" flexDir=\"column\">\n    <Text mr={ 2 }>{ label }: </Text>\n    <Link target=\"_blank\" color=\"brand.1\" href={ link }>{ link }</Link>\n  </Flex>\n}\n\nexport default function ProjectView () {\n  const { pId } = useParams<RouterParams>()\n  const history = useHistory()\n  const [projects, loading] = useProjects()\n  const [activeProj, setActiveProj] = useState<Project | null>(null)\n\n  useEffect(() => {\n    if (loading || !projects.length) {\n      return\n    }\n\n    const project = projects.find(p => toKebab(p.title) === pId)\n    if (!project) {\n      history.push('/projects')\n      return\n    }\n    setActiveProj(project)\n  }, [loading, projects, pId, history])\n\n  if (!activeProj) {\n    return <LoadingModal hideBG />\n  }\n\n  return (\n    <Flex w=\"100%\" alignItems=\"center\" flexDir=\"column\">\n      <MyHelmet title={ `TBG - ${ activeProj.title }` } description={ activeProj.description } />\n      <Flex flexDir=\"column\" w=\"100%\" maxW=\"1200px\">\n        <p className=\"title is-3\">{ activeProj.title }</p>\n        <Grid maxW=\"1200px\" justifyItems=\"center\" justifyContent=\"center\" w=\"100%\" rowGap={ 4 } columnGap={ 2 } templateColumns=\"repeat(auto-fill, minmax(auto, 500px))\">\n          <Text maxW=\"600px\" my={ 4 }>{ activeProj.description }</Text>\n          <ImageEle px={ 1 } width=\"400px\" meta={ activeProj.gifId } />\n          <ImageEle width=\"400px\" meta={ activeProj.imageId } />\n          <Flex flexDir=\"column\" alignItems=\"flex-end\" rowGap={ 4 } templateColumns=\"auto\" w=\"100%\">\n            {\n              activeProj.links?.map(x => <LinkView { ...x } key={ x.link } />)\n            }\n          </Flex>\n        </Grid>\n      </Flex>\n    </Flex>\n  )\n}","import { Flex, FlexProps, Text } from '@chakra-ui/react'\nimport React from 'react'\n\ninterface Props extends FlexProps {\n  value: string\n  change: (str: string) => void\n  label: string\n  clazz?: string\n  type?: string\n}\nexport default function InputField (props: Props) {\n  return (\n    <Flex w=\"100%\" flexDir=\"column\" { ...props }>\n      <Text className=\"label\">{ props.label }</Text>\n      <input\n        value={ props.value }\n        onChange={ (x) => props.change(x.target.value) }\n        className={ props.clazz || 'input' }\n        type={ props.type || 'text' } />\n    </Flex>\n  )\n}","import { ButtonProps, Button as CButton } from '@chakra-ui/react'\nimport React from 'react'\nimport Loading from './Loading'\n\nexport enum Colors {\n  PRIMARY = ' is-primary ',\n  SUCCESS = ' is-success ',\n  INFO = ' is-info ',\n  DANGER = ' is-danger '\n}\n\ninterface Props extends Partial<ButtonProps> {\n  label?: string\n  loading?: boolean\n  color?: Colors\n  click: () => void\n}\nexport default function Button (props: Props) {\n  const clazz = `button ${ props.color }`\n\n  if (props.loading)\n    return (\n      <Loading size={ 3 } />\n    )\n\n  return (\n    <CButton onClick={ props.click } className={ clazz }{ ...props }>{ props.label }{ props.children }</CButton>\n  )\n}","import React from 'react'\n\ninterface Props {\n  size: number\n}\nexport default class Loading extends React.Component<Props>{\n\n  render () {\n    return (\n      <progress\n        style={ { width: `${ this.props.size }rem`, height: `${ this.props.size }rem` } }\n        className=\"pure-material-progress-circular\"\n      />\n    )\n  }\n}","import React, { useRef, useState, useEffect } from 'react'\nimport { apiRequest } from '../ts/request'\nimport { ImageMeta } from '@tbg/types'\nimport InputField from './InputField'\nimport Button from './Button'\n\ninterface Props {\n  meta: ImageMeta | null\n  close: () => void\n}\nexport default function ImageUpload ({ meta, close }: Props) {\n  const [name, setName] = useState(meta?.name || '')\n  const [loading, setLoading] = useState(false)\n  const [description, setDescription] = useState(meta?.description || '')\n  const fileElement = useRef<HTMLInputElement | null>(null)\n\n  useEffect(()=>{\n    setName(meta?.name || '')\n    setDescription(meta?.description || '')\n  }, [meta])\n\n  async function submit (): Promise<void> {\n    const ele = fileElement.current\n    if (!ele || !ele.files) return\n\n    const file = ele.files[0]\n    if (!file) return\n\n    setLoading(true)\n    await apiRequest(`/api/image/${ name }?descr=${ description }`, 'POST', file)\n    setLoading(false)\n    close()\n  }\n\n  return (\n    <div className=\"modal is-active\" style={ { width: '100vw', height: '100vh', position: 'fixed', zIndex: 1000 } }>\n      <div className=\"modal-background\"></div>\n      <div className=\"modal-card\">\n        <header className=\"modal-card-head has-background-white\" style={ { border: 'none' } }>\n          <p className=\"modal-card-title\">Uploading Image</p>\n          <i className=\"button material-icons is-danger is-size-6\" onClick={ () => close() }>close</i>\n        </header>\n        <section className=\"modal-card-body\">\n          <div>\n            <InputField value={ name } label=\"Choose Name\" change={ setName } />\n            <InputField value={ description || '' } label=\"Description\" change={ setDescription } />\n            <div className=\"field\">\n              <p className=\"label\">Choose file</p>\n              <input ref={ (x) => fileElement.current = x } className=\"input\" type=\"file\" />\n            </div>\n          </div>\n        </section>\n        <footer className=\"modal-card-foot has-background-white\" style={ { border: 'none' } } >\n          { <Button isLoading={ loading } click={ submit } className=\"button is-primary\" >UPLOAD</Button> }\n        </ footer>\n      </div>\n    </div>\n  )\n}","import React, { useState } from 'react'\nimport ImageUpload from './ImageUpload'\nimport { ImageMeta } from '@tbg/types/src/project'\nimport { apiRequest } from '../ts/request'\nimport ImageEle from './Image'\nimport { useImages } from '../ts/projects'\nimport { Flex, Text } from '@chakra-ui/react'\nimport Button from './Button'\n\nexport default function ImageManager () {\n  const [showImageUpload, setShowImageUpload] = useState(false)\n  const [refresh, setRefresh] = useState(false)\n  const [activeImage, setActiveImage] = useState<ImageMeta | null>(null)\n  const [images] = useImages(refresh)\n\n  async function deleteImage (id: string) {\n    await apiRequest('/api/image/' + id, 'DELETE')\n    setRefresh(!refresh)\n  }\n\n  function showUpload (img: ImageMeta | null) {\n    setShowImageUpload(true)\n    setActiveImage(img)\n    setRefresh(!refresh)\n  }\n\n  function closeUpload () {\n    setShowImageUpload(false)\n    setActiveImage(null)\n    setRefresh(!refresh)\n  }\n\n  return (\n    <Flex flexDir=\"column\" w=\"100%\">\n      <Button\n        click={ () => setShowImageUpload(true) }\n        style={ { width: 'fit-content' } }\n        className=\"button is-primary\">\n        Upload New Image\n          </Button>\n\n      <Flex w=\"100%\" flexWrap=\"wrap\" py={ 2 }>\n        {\n          images.map(x => (\n            <Flex mb={ 2 } mr={ 2 } p={ 2 } bg=\"white\" className=\"shadow-1\" borderRadius=\"4px\" flexDirection=\"column\" w=\"300px\" key={ x.name } >\n              <Text fontSize=\"lg\">Name: { x.name }</Text>\n              <Text fontSize=\"lg\">Views: { x.viewed }</Text>\n              <ImageEle height='200px' meta={ x } />\n              <Flex w=\"100%\" className=\"center\" mt={ 1 } justifyContent=\"space-around\">\n                <button onClick={ () => showUpload(x) } className=\"button is-link\"> Update</button>\n                <button onClick={ () => deleteImage(x.name) } className=\"button is-danger\"> Delete</button>\n              </Flex>\n            </Flex>\n          ))\n        }\n      </Flex>\n      { showImageUpload && <ImageUpload meta={ activeImage } close={ closeUpload } /> }\n    </Flex>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { apiRequest } from '../ts/request'\nimport { Project, ProjectLink } from '@tbg/types'\nimport InputField from './InputField'\nimport { Flex } from '@chakra-ui/react'\nimport Button from './Button'\n\ninterface LinkInputProps {\n  value: ProjectLink\n  update: (v: ProjectLink | null) => void\n}\nfunction LinkInput ({ value, update }: LinkInputProps) {\n  const { label, link } = value\n  return (\n    <Flex mt={ 2 } w=\"100%\" h=\"100%\" alignItems=\"flex-end\">\n      <InputField label=\"Label\" value={ label } change={ (x) => update({ ...value, label: x }) } />\n      <InputField label=\"Link\" value={ link } change={ (x) => update({ ...value, link: x }) } />\n      <Button label=\"X\" click={ () => update(null) } />\n    </Flex>\n  )\n}\n\nconst defaultProje: Project = {\n  description: '',\n  gifId: '',\n  imageId: '',\n  links: [],\n  order: 100,\n  title: ''\n}\ninterface Props {\n  proj: Project | null\n  close: () => void\n}\nexport default function ProjectAdd (props: Props) {\n  const [project, setProject] = useState(props.proj || { ...defaultProje })\n\n  useEffect(() => {\n    setProject(props.proj || { ...defaultProje })\n  }, [props.proj])\n\n  function update (u: Partial<Project>) {\n    setProject({ ...project, ...u })\n  }\n\n  async function submit (): Promise<void> {\n    await apiRequest(`/api/projects/create`, 'POST', project)\n    props.close()\n  }\n\n  function updateLink (i: number, link: ProjectLink | null) {\n    if (!link) {\n      project.links.splice(i, 1)\n    } else {\n      project.links[i] = link\n    }\n    update({ links: [...project.links] })\n  }\n\n  function addLink () {\n    project.links.push({ label: '', link: '' })\n    update({ links: [...project.links] })\n  }\n\n  return (\n    <div className=\"modal is-active\" style={ { width: '100vw', height: '100vh', position: 'fixed', zIndex: 1000 } }>\n      <div className=\"modal-background\"></div>\n      <div className=\"modal-card\">\n        <header className=\"modal-card-head has-background-white\" style={ { border: 'none' } }>\n          <p className=\"modal-card-title\">Making Project</p>\n          <i className=\"button material-icons is-danger is-size-6\" onClick={ () => props.close() }>close</i>\n        </header>\n        <Flex flexDir=\"column\" w=\"100%\" className=\"modal-card-body\">\n          <InputField label=\"Title\" value={ project.title } change={ (x) => update({ title: x }) } />\n          <div className=\"field\">\n            <p className=\"label\">Description</p>\n            <textarea\n              value={ project.description }\n              onChange={ (x) => update({ description: x.target.value }) }\n              className=\"textarea\" />\n          </div>\n          <InputField label=\"Image ID\" value={ project.imageId } change={ (x) => update({ imageId: x }) } />\n          <InputField label=\"Gif ID\" value={ project.gifId } change={ (x) => update({ gifId: x }) } />\n          <InputField label=\"Order\" type=\"number\" value={ project.order.toString() } change={ (x) => update({ order: parseInt(x) }) } />\n          <Button w=\"fit-content\" mt={ 2 } click={ addLink } label=\"Add Link\" />\n          <Flex flexDir=\"column\">\n            {\n              project.links.map((link, i) => (\n                <LinkInput key={ i } update={ (v) => updateLink(i, v) } value={ link } />\n              ))\n            }\n          </Flex>\n        </Flex>\n        <footer className=\"modal-card-foot has-background-white\" style={ { border: 'none' } } >\n          <button onClick={ () => submit() } className=\"button is-primary\" >SUBMIT</button>\n        </ footer>\n      </div>\n    </div >\n  )\n}","import React, { useState } from 'react'\nimport ProjectAdd from './ProjectAdd'\nimport { Project } from '@tbg/types/src/project'\nimport { apiRequest } from '../ts/request'\nimport { toKebab } from '@tbg/util'\nimport { useProjects } from '../ts/projects'\nimport LoadingModal from './LoadingModal'\nimport { Flex, Grid, Text } from '@chakra-ui/react'\nimport Button from './Button'\n\nexport default function ProjectManager () {\n  const [refresh, setRefresh] = useState(false)\n  const [projects, loading] = useProjects(refresh)\n  const [projectAdd, setProjectAdd] = useState(false)\n  const [activeProject, setActiveProj] = useState<Project | null>(null)\n\n  function close () {\n    setProjectAdd(false)\n    setActiveProj(null)\n    setRefresh(!refresh)\n  }\n\n  async function deleteProj (x: Project) {\n    await apiRequest('/api/projects/' + toKebab(x.title), 'DELETE')\n    setRefresh(!refresh)\n  }\n\n  const showProjectAdd = (proj: Project | null) => {\n    console.log(proj)\n    setProjectAdd(true)\n    setActiveProj(proj)\n  }\n\n  if (loading) {\n    return <LoadingModal hideBG />\n  }\n\n  return (\n    <Flex flexDir=\"column\" w=\"100%\">\n      <Text className=\"title\">Projects</Text>\n      <button\n        onClick={ () => setProjectAdd(true) }\n        style={ { width: 'fit-content' } }\n        className=\"button is-primary\">\n        Upload New Project\n          </button>\n      <Grid py={ 1 } w=\"100%\" rowGap={ 1 } columnGap={ 2 } templateColumns=\"repeat(auto-fill, 350px)\">\n        {\n          projects.map(x =>\n            <Flex className=\"shadow-1\" padding={ 2 } bg=\"white\" flexDirection=\"column\" w=\"350px\" key={ x.title }>\n              <Grid rowGap={ 2 } overflowX=\"hidden\" columnGap={ 2 } templateColumns=\"100px auto\">\n                <Text fontWeight=\"600\">Title: </Text>\n                <Text> { x.title }</Text>\n                <Text fontWeight=\"600\">GIF: </Text>\n                <Text> { x.gifId }</Text>\n                <Text fontWeight=\"600\">Image: </Text>\n                <Text> { x.imageId }</Text>\n              </Grid>\n              <Flex mt=\"auto\" w=\"100%\" justifyContent=\"space-around\" >\n                <Button click={ () => showProjectAdd(x) } className=\"button is-link\"> Update</Button>\n                <Button click={ () => deleteProj(x) } className=\"button is-danger\"> Delete</Button>\n              </Flex>\n            </Flex>\n          ) }\n      </Grid>\n      { projectAdd && <ProjectAdd proj={ activeProject } close={ close } /> }\n    </Flex>\n  )\n}\n","/* eslint jsx-a11y/anchor-is-valid: 0 */\nimport React, { useEffect } from 'react'\nimport ImageManager from '../components/ImageManager'\nimport ProjectManager from '../components/ProjectManager'\nimport { Route, Switch, useHistory } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { Auth } from '../ts/Auth'\nimport { Flex } from '@chakra-ui/react'\n\nexport default function Manage () {\n  const history = useHistory()\n  useEffect(() => {\n    if (!Auth.key) {\n      history.push('/admin/login')\n    }\n  }, [history])\n\n  return (\n    <Flex flexDirection=\"column\" w=\"100%\">\n      <div className=\"tabs\">\n        <ul>\n          <Link to=\"/admin/images\">Images</Link>\n          <Link to=\"/admin/projects\">Projects</Link>\n        </ul>\n      </div>\n      <Switch>\n        <Route path=\"/admin/images\"><ImageManager /></Route>\n        <Route><ProjectManager /></Route>\n      </Switch>\n    </Flex>\n  )\n}","import { PlayersTypes, MoveResponse } from './types'\n\nexport type PlayerColour = \"b\" | \"w\"\nexport abstract class ChessPlayer {\n  abstract name: PlayersTypes\n  abstract isHuman: boolean\n  abstract getMove (fen: string): Promise<MoveResponse | null>\n  abstract get stats (): string | null\n}","import { ChessPlayer } from './chessPlayer'\nimport { PlayersTypes, MoveResponse } from './types'\n\nexport class Human extends ChessPlayer {\n  name = PlayersTypes.HUMAN\n  isHuman = true\n  getMove (fen: string): Promise<MoveResponse> {\n    throw new Error('Human player should not call get move.')\n  }\n\n  get stats (): string | null {\n    return null\n  }\n}","export function shuffle<T> (a: T[]) {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]]\n  }\n  return a\n}","import { ChessInstance, newBoard, PieceType } from '../../chess'\nimport { PlayerColour } from '../chessPlayer'\nimport { shuffle } from '../../../util'\nimport { MoveResponse, timeTaken } from '../types'\n\nconst MINIMAX_VALS: { [key in PieceType]: number } = {\n  p: 1,\n  r: 5,\n  n: 3,\n  b: 3,\n  q: 9,\n  k: 10,\n}\n\nexport class MiniMacsNode {\n  game: ChessInstance\n  isDone = false\n  moves: string[]\n  bestValue = Number.NEGATIVE_INFINITY\n  bestMove: string | null = null\n  a: number = Number.POSITIVE_INFINITY\n  b: number = Number.NEGATIVE_INFINITY\n  colour: PlayerColour\n  moveCount = 0\n\n  constructor (fen: string) {\n    this.game = newBoard(fen)\n    this.colour = this.game.turn()\n    const moves = this.game.moves()\n    this.moves = shuffle(moves)\n  }\n\n  NewLayer (depth: number, isMaxing: boolean, a = Number.NEGATIVE_INFINITY, b = Number.POSITIVE_INFINITY): number {\n    if (depth === 0) {\n      return this.EvaluateBoard()\n    }\n\n    let best_move: string | null = null\n    let fen = this.game.fen()\n    let moves = shuffle(this.game.moves(true))\n    let best_value = isMaxing ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY\n\n    for (let i = 0; i < moves.length; i++) {\n      let move = moves[i]\n      this.moveCount++\n      if (!this.game.move(move)) {\n        console.log(\"move failed\")\n      }\n\n      let value = this.NewLayer(depth - 1, !isMaxing, a, b)\n\n      if (isMaxing) {\n        if (value > best_value) {\n          best_move = move\n          best_value = value\n        }\n        a = Math.max(a, value)\n      }\n      else {\n        if (value < best_value) {\n          best_move = move\n          best_value = value\n        }\n        b = Math.min(b, value)\n      }\n\n      this.game.load(fen, false)\n      if (b <= a) {\n        break\n      }\n    }\n\n    this.bestMove = best_move || moves[0]\n    return best_value\n  }\n\n  get isMyGo () {\n    return this.game.turn() === this.colour\n  }\n\n  EvaluateBoard () {\n    const board = this.game.board()\n\n    if (this.game.in_checkmate()) {\n      return this.isMyGo ? -100 : 100\n    }\n\n    let b = 0\n    let w = 0\n    for (let i = 0; i < board.length; i++)\n      for (let y = 0; y < board[i].length; y++) {\n        const column = board[i][y]\n        if (!column) continue\n\n        let val = MINIMAX_VALS[column.type]\n        if (column.color === 'w') w += val\n        else b += val\n      }\n\n    return this.colour === 'w' ? w - b : b - w\n  }\n\n}\n\nexport function quickGetMove (fen: string): MoveResponse {\n  const node = new MiniMacsNode(fen)\n  const strt = performance.now()\n  const rating = node.NewLayer(4, true)\n  return {\n    move: node.bestMove,\n    rating,\n    details: `Searched ${ node.moveCount } different moves`,\n    timeTaken: timeTaken(strt)\n  }\n}","import { quickGetMove } from './node'\n\nexport async function getMove (fen: string) {\n  return quickGetMove(fen)\n}","import { ChessPlayer } from '../chessPlayer'\nimport { PlayersTypes, MoveResponse } from '../types'\nimport * as MinMaxWorker from './node.worker'\n\ntype MoveWorker = typeof MinMaxWorker\nexport class MinMaxBot extends ChessPlayer {\n  name = PlayersTypes.MINMAX\n  isHuman = false\n  statHistory: string = ''\n  static _woker: MoveWorker\n  get worker (): MoveWorker {\n    if (!MinMaxBot._woker) {\n      MinMaxBot._woker = MinMaxWorker\n    }\n\n    return MinMaxBot._woker\n  }\n\n\n  async getMove (fen: string): Promise<MoveResponse | null> {\n    const result = await this.worker.getMove(fen)\n    return result\n  }\n\n  get stats (): string {\n    return this.statHistory\n  }\n}","import { ChessPlayer } from './chessPlayer'\nimport { Human } from './human'\nimport { MinMaxBot } from './MinMax'\nimport { RandomBot } from './random'\n\nexport enum PlayersTypes {\n  HUMAN = \"Human\",\n  MINMAX = \"MinMax\",\n  RANDOM = \"Random\"\n}\n\nexport const Players: { [key in PlayersTypes]: () => ChessPlayer } = {\n  Human: () => new Human(),\n  MinMax: () => new MinMaxBot(),\n  Random: () => new RandomBot()\n}\n\nexport function PlayerFactory(player: PlayersTypes): ChessPlayer {\n  console.log('Player', player)\n  return Players[player]()\n}\n\nexport interface MoveResponse {\n  move: string | null\n  rating: number\n  timeTaken: number\n  details: string\n}\n\nexport function timeTaken(strt: number): number {\n  return (performance.now() - strt) / 1000\n}","import { ChessPlayer } from './chessPlayer'\nimport { newBoard } from '../chess'\nimport { PlayersTypes, MoveResponse, timeTaken } from './types'\n\n\nexport class RandomBot extends ChessPlayer {\n  name = PlayersTypes.RANDOM\n  isHuman = false\n  lastNumberOfMoves = 0\n\n  async getMove(fen: string): Promise<MoveResponse | null> {\n    const strt = performance.now()\n    const game = newBoard(fen)\n    const possibleMoves = game.moves()\n    this.lastNumberOfMoves = possibleMoves.length\n    if (possibleMoves.length <= 0) return null\n\n    let randomIndex = Math.floor(Math.random() * possibleMoves.length)\n    const move = possibleMoves[randomIndex]\n    return { move, rating: 1, timeTaken: timeTaken(strt), details: 'I picked randomly' }\n  }\n\n  get stats() {\n    return `I Had ${this.lastNumberOfMoves} I could do, I picked randomly because I am an Idiot`\n  }\n}\n","import React from 'react'\nimport Renderer, { Piece } from 'chessboardjsx'\nimport { newBoard, ChessInstance, Square, ShortMove, Move } from '../../ts/chess/chess'\nimport { ChessPlayer, PlayerColour } from '../../ts/chess/players/chessPlayer'\nimport { MoveResponse } from '../../ts/chess/players'\n\ntype SquaresCSS = Pick<Renderer['props'], 'squareStyles'>['squareStyles']\n\nconst colorLookup: { 'w': 'white', 'b': 'black' } = {\n  'w': 'white',\n  'b': 'black'\n}\ninterface Drop {\n  sourceSquare: Square\n  targetSquare: Square\n  piece: Piece\n}\n\ninterface Props {\n  white: ChessPlayer\n  black: ChessPlayer\n  pause: boolean\n  onMove: (player: PlayerColour, moveResponse: MoveResponse) => void\n  setUndo: (undo: () => void) => void\n}\ninterface State {\n  fen: string\n  history: string[]\n  orientation: PlayerColour\n  lastMove: Move | null\n}\n\nexport default class ChessBoard extends React.Component<Props, State>{\n  game: ChessInstance\n\n  constructor (p: Props) {\n    super(p)\n    this.undo = this.undo.bind(this)\n    p.setUndo(this.undo)\n\n    this.game = newBoard()\n    this.state = {\n      fen: this.game.fen(),\n      history: [this.game.fen()],\n      orientation: this.currentIsHuman ? 'w' : 'b',\n      lastMove: null\n    }\n\n    this.getMove()\n  }\n\n  undo () {\n    const lastMove = this.game.undo()\n    console.log('UNDO', lastMove)\n    if (!lastMove) {\n      console.log('NO MOVE TO UNDO')\n      return\n    }\n\n    this.setState({ lastMove: null, fen: this.game.fen() }, () => {\n      this.forceUpdate()\n    })\n  }\n\n  get currentIsHuman (): boolean {\n    return this.currentPlayer.isHuman\n  }\n\n  get currentPlayerColour (): PlayerColour {\n    return this.game.turn()\n  }\n\n  get currentPlayer (): ChessPlayer {\n    const turn = this.game.turn()\n    return turn === 'w' ? this.props.white : this.props.black\n  }\n\n  get lastPlayerColour (): PlayerColour {\n    const turn = this.game.turn()\n    return turn === 'w' ? 'b' : 'w'\n  }\n\n  get lastPlayer (): ChessPlayer {\n    const turn = this.game.turn()\n    return turn === 'w' ? this.props.black : this.props.white\n  }\n\n  async getMove () {\n    if (this.currentIsHuman || this.props.pause) {\n      return\n    }\n\n    const response = await this.currentPlayer.getMove(this.game.fen())\n    if (!response?.move) {\n      this.checkGameOver()\n      return\n    }\n\n    await this.makeMove(response.move)\n    this.props.onMove(this.lastPlayerColour, response)\n  }\n\n  checkGameOver () {\n    return this.game.game_over() ||\n      this.game.in_draw()\n  }\n\n  updateBoard (): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.setState({ fen: this.game.fen() }, resolve)\n    })\n  }\n\n  async makeMove (move: ShortMove | string): Promise<void> {\n    if (this.props.pause) return\n\n    const result = this.game.move(move)\n    if (result === null) {\n      console.log('Illegal move')\n      return\n    }\n\n    this.setState({ lastMove: result })\n\n    await this.updateBoard()\n    if (this.checkGameOver()) {\n      setTimeout(() => {\n        this.game.reset()\n        this.getMove()\n      }, 3000)\n      return\n    }\n\n    setTimeout(() => this.getMove(), 1000)\n  }\n\n  onDrop (drop: Drop) {\n    if (!this.currentIsHuman) {\n      return\n    }\n\n    this.makeMove({\n      from: drop.sourceSquare,\n      to: drop.targetSquare,\n      promotion: 'q'\n    })\n  }\n\n  async componentDidUpdate (prev: Props) {\n    if (!this.props.pause && prev.pause) {\n      return this.getMove()\n    }\n\n    if ((this.props.white !== prev.white) ||\n      (this.props.black !== prev.black)) {\n      return this.getMove()\n    }\n  }\n\n  get fromCSS (): React.CSSProperties {\n    return {\n      backgroundColor: 'grey',\n      transitionDuration: '0.1s'\n    }\n  }\n\n  get toCSS (): React.CSSProperties {\n    return {\n      backgroundColor: 'yellow',\n      transitionDuration: '0.2s'\n    }\n  }\n\n  get tileColours (): SquaresCSS {\n    const move = this.state.lastMove\n    if (!move) return {}\n    return {\n      [move.to]: this.toCSS\n    }\n  }\n\n  render () {\n    console.log('FENN', this.state.fen)\n    return (\n      <div className=\"shadow-1\">\n        <Renderer\n          undo={ true }\n          calcWidth={ () => window.outerWidth > 500 ? 500 : 320 }\n          orientation={ colorLookup[this.state.orientation] }\n          showNotation={ true }\n          draggable={ this.currentIsHuman }\n          squareStyles={ this.tileColours }\n          position={ this.state.fen }\n          onDrop={ (x: Drop) => this.onDrop(x) }\n        />\n      </div>\n    )\n  }\n}","import React from 'react'\nimport { Flex, Box, Text } from '@chakra-ui/react'\n\nexport interface MySelectProps<T extends string> {\n  label?: string\n  value: T | null\n  change: (t: T | null) => void\n  options: string[]\n}\nexport default function MySelect<T extends string> (props: MySelectProps<T>) {\n  const label = props.label && <Text mb={ 1 } fontWeight=\"700\"> { props.label }</Text>\n  const selectProps = {\n    value: props.value,\n    onChange: (v: any) => {\n      const str = v.target.value\n      props.change(str || null)\n    }\n  } as any\n\n  return (\n    <Flex minW=\"100px\" flexDirection=\"column\" { ...props }>\n      { label }\n      <Flex style={ { width: 'fit-content' } } className=\"select\">\n        <Box { ...selectProps } as=\"select\" >\n          { props.options.map(x => (<option key={ x } value={ x }>{ x }</option>)) }\n        </Box>\n      </Flex>\n    </Flex>\n  )\n}","import React, { useRef } from 'react'\nimport { Flex, Text } from '@chakra-ui/react'\n\nexport interface Log {\n  id: string\n  time: number\n  color: string\n  botName: string\n  details: string\n}\n\ninterface Props {\n  logs: Log[]\n}\nexport default function ChessLog ({ logs }: Props) {\n  const endRef = useRef<HTMLDivElement | null>(null)\n  // useEffect(() => {\n  //   if (!endRef.current) return\n  //   endRef.current.scrollIntoView({ behavior: 'smooth' })\n  // }, [logs])\n  return (\n    <Flex py={ 1 } px={ 2 } overflowX=\"scroll\" bg=\"white\" mt={ 2 } className=\"shadow-1\" flexDirection=\"column\" h=\"300px\">\n      {\n        logs.map(log => (\n          <Flex mb={ 1 } flexDirection=\"column\" key={ log.id }>\n            <Flex flexDirection=\"row\">\n              <Text fontWeight=\"600\" mr={ 1 }>{ log.color }</Text>\n              <Text>{ log.botName }:</Text>\n            </Flex>\n            <Flex ml={ 5 }>{ log.details }</Flex>\n          </Flex>\n        ))\n      }\n      <div ref={ r => endRef.current = r } />\n    </Flex >\n  )\n}","import React, { useRef, useState } from 'react'\nimport { PlayersTypes, PlayerFactory, PlayerColour, MoveResponse } from '../../ts/chess/players'\nimport ChessBoard from './ChessBoard'\nimport Button, { Colors } from '../Button'\nimport MySelect from '../MySelect'\nimport { Flex, Grid } from '@chakra-ui/react'\nimport { getUnixTime } from 'date-fns'\nimport { useWindowSize } from '../../ts/resize'\nimport ChessLog, { Log } from './ChessLog'\n\nconst playerOptions = Object.values(PlayersTypes)\nexport default function ChessController () {\n  const [paused, setPaused] = useState(false)\n  const [black, setBlack] = useState(PlayerFactory(PlayersTypes.RANDOM))\n  const [white, setWhite] = useState(PlayerFactory(PlayersTypes.RANDOM))\n  const [w] = useWindowSize()\n  const [logs, setLogs] = useState<Log[]>([])\n\n  const undo = useRef<() => void>()\n\n  function updateStats (color: PlayerColour, response: MoveResponse) {\n    const time = getUnixTime(new Date())\n    const log: Log = {\n      id: `${ color }-${ time }`,\n      time,\n      botName: color === 'w' ? white.name : black.name,\n      color,\n      details: response.details\n    }\n    setLogs([...logs, log])\n  }\n\n  const columns = `repeat(auto-fill, ${ w > 500 ? 500 : 320 }px)`\n  return (\n    <Flex w=\"100%\" justifyContent=\"center\">\n      <Grid py={ 1 } w=\"100%\" maxW=\"1020px\" columnGap=\"10px\" rowGap={ 2 } justifyContent=\"center\" templateColumns={ columns }>\n        <ChessBoard\n          setUndo={ (x) => undo.current = x }\n          onMove={ updateStats }\n          black={ black }\n          pause={ paused }\n          white={ white } />\n        <Flex flexDir=\"column\">\n          <Flex flexDir=\"column\" w=\"100%\" h=\"fit-content\">\n            <Flex mb={ 2 } justifyContent=\"space-around\" flexDirection=\"row\" w=\"100%\">\n              <MySelect\n                label=\"White\"\n                value={ white.name }\n                options={ playerOptions }\n                change={ (x) => x && setWhite(PlayerFactory(x)) } />\n\n              <MySelect\n                label=\"Black\"\n                value={ black.name }\n                options={ playerOptions }\n                change={ (x) => x && setBlack(PlayerFactory(x)) } />\n            </Flex>\n            <Flex w=\"100%\" justifyContent=\"space-around\">\n              <Button\n                color={ Colors.INFO }\n                label={ paused ? 'Start' : 'Pause' }\n                click={ () => { setPaused(!paused) } }\n              />\n\n              <Button\n                color={ Colors.INFO }\n                label=\"Undo\"\n                click={ () => {\n                  setPaused(true)\n                  if (undo.current) {\n                    undo.current()\n                  }\n                } }\n              />\n            </Flex>\n          </Flex>\n          <ChessLog logs={ logs } />\n        </Flex>\n      </Grid>\n    </Flex >)\n}","import { useState, useLayoutEffect } from 'react'\n\nexport function useWindowSize (): [number, number] {\n  const [size, setSize] = useState<[number, number]>([0, 0])\n  useLayoutEffect(() => {\n    function updateSize () {\n      setSize([window.innerWidth, window.innerHeight])\n    }\n    window.addEventListener('resize', updateSize)\n    updateSize()\n    return () => window.removeEventListener('resize', updateSize)\n  }, [])\n  return size\n}\n\n","import { Flex } from '@chakra-ui/react'\nimport React from 'react'\nimport ChessController from '../components/chess/ChessController'\nimport MyHelmet from '../components/MyHelmet'\nexport default function ChessPage () {\n  return (\n    <Flex w=\"100%\" justifyContent=\"center\" flexDir=\"column\">\n      <MyHelmet title=\"TBG - Chess\" description=\"This is a selection of chess bots written by myself that play against eachother (or you). The portfolio of bots will grow as I find more time to work on them\" />\n      <p className=\"title is-3 is-size-5-mobile\">Portfolio of chess bots (WIP)</p>\n      <ChessController />\n    </Flex>\n  )\n}","import React, { useState } from 'react'\nimport InputField from './InputField'\nimport { Auth } from '../ts/Auth'\nimport { Spinner } from '@chakra-ui/react'\nimport { useHistory } from 'react-router'\n\nexport default function Login () {\n  const history = useHistory()\n  const [key, setKey] = useState('')\n  const [loading, setLoading] = useState(false)\n  async function submit () {\n    setLoading(true)\n    if (!await Auth.validate(key)) {\n      setLoading(false)\n    }\n\n    history.length ? history.goBack() : history.push('/admin/')\n  }\n\n  return (\n    <div className=\"modal is-active\" style={ { width: '100vw', height: '100vh', position: 'fixed', zIndex: 1000 } }>\n      <div className=\"modal-background\"></div>\n      <div className=\"modal-card\">\n        <header className=\"modal-card-head has-background-white\" style={ { border: 'none' } }>\n          <p className=\"title\">Login</p>\n        </header>\n        <section className=\"modal-card-body\">\n          <InputField change={ setKey } label=\"Manage Key\" value={ key } />\n        </section>\n        <footer className=\"modal-card-foot has-background-white\" style={ { border: 'none' } } >\n          {\n            loading ?\n              <Spinner size=\"lg\" />\n              : <button className=\"button\" onClick={ submit }>Submit</button>\n          }\n        </footer>\n      </div>\n    </div >\n  )\n}","import React from 'react'\nimport { Route, Switch, BrowserRouter,  } from 'react-router-dom'\nimport Home from './pages/Home'\nimport Contact from './pages/Contact'\nimport Projects from './pages/Projects'\nimport NavBar from './components/NavBar'\nimport Background from './components/Background'\nimport ProjectView from './pages/ProjectView'\nimport Manage from './pages/Manage'\nimport './css/main.css'\nimport ChessPage from './pages/Chess'\nimport Login from './components/Login'\nimport { Flex } from '@chakra-ui/react'\nimport { createBrowserHistory } from 'history'\nimport ReactGA from 'react-ga'\n\nconst history = createBrowserHistory()\nif (process.env.NODE_ENV === 'production') {\n  ReactGA.initialize('G-0W1Q4MZRW1')\n  ReactGA.pageview(window.location.pathname + window.location.search)\n  history.listen((location) => {\n    ReactGA.pageview(location.pathname + location.search)\n  })\n}\n\nexport default function App () {\n  return (\n    <div>\n      <Background color='hsl(0, 0%, 96%)' />\n      <BrowserRouter>\n        <NavBar />\n        <Flex flexDirection=\"column\" alignItems=\"center\">\n          <Flex pt={ 2 } px={ 1 } w=\"100%\" maxW=\"1200px\" >\n            <Switch>\n              <Route path=\"/contact\" component={ Contact } />\n              <Route path=\"/projects/:pId\" component={ ProjectView } />\n              <Route path=\"/projects\" component={ Projects } />\n              <Route path=\"/chess\" component={ ChessPage } />\n              <Route path=\"/admin/login\" component={ Login } />\n              <Route path=\"/admin\" component={ Manage } />\n              <Route path=\"/\" component={ Home } />\n            </Switch>\n          </Flex>\n        </Flex>\n      </BrowserRouter >\n    </div>\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { theme } from '@chakra-ui/react'\n\nexport const myTheme = {\n    ...theme,\n    colors: {\n        brand: {\n            1:'#68c374'\n        },\n        ...theme.colors\n    },\n    fonts: {\n        body: ' BlinkMacSystemFont,-apple-system,\"Segoe UI\",\"Roboto\",\"Oxygen\",\"Ubuntu\",\"Cantarell\",\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",\"Helvetica\",\"Arial\",sans-serif',\n        heading: ' BlinkMacSystemFont,-apple-system,\"Segoe UI\",\"Roboto\",\"Oxygen\",\"Ubuntu\",\"Cantarell\",\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",\"Helvetica\",\"Arial\",sans-serif',\n        mono: ' BlinkMacSystemFont,-apple-system,\"Segoe UI\",\"Roboto\",\"Oxygen\",\"Ubuntu\",\"Cantarell\",\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",\"Helvetica\",\"Arial\",sans-serif'\n    }\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './css/index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { myTheme } from './theme'\nimport { ThemeProvider } from '@emotion/react'\n\n\nReactDOM.render(\n    <ThemeProvider theme={ myTheme }>\n        <App />\n    </ThemeProvider>\n    ,\n    document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}